import{cR as u,u as p,r as i,aL as m,aq as s,ar as n,cU as l}from"./index.59694a49.js";function f(){return window.location.origin}function y(){const e=navigator.userAgent;return e.match(/MicroMessenger/i)||e.match(/Wechat/i)?"wechat":e.match(/Alipay/i)||e.match(/AliApp/i)||e.match(/AlipayClient/i)?"alipay":e.match(/QQ/i)||e.match(/QQBrowser/i)?"qq":u()?"mobile":"pc"}async function g(e,t,a){try{return(await s.post("/payment/create",{type:e,quota:t,domain:f(),name:`${l} - ${a}`,device:y()})).data}catch(r){return{status:!1,error:n(r)}}}async function d(e){try{return(await s.get(`/payment/check/${e}`)).data}catch(t){return{status:!1,error:n(t),order_state:!1}}}function w(e){const{t}=p(),[a,r]=i.useState(!1);return i.useEffect(()=>{const o=setInterval(async()=>{const c=await d(e);m(t,c),c.status&&c.order_state&&(r(!0),clearInterval(o))},2e3);return()=>clearInterval(o)},[]),a}async function v(e,t){try{return(await s.get("/admin/payment/view",{params:{page:e,search:t}})).data}catch(a){return{status:!1,error:n(a),data:[],total:0}}}async function A(e,t){try{return(await s.get("/admin/payment/recheck",{params:{order:e,service:t}})).data}catch(a){return{status:!1,error:n(a),order_state:!1,is_changed:!1}}}export{y as a,v as b,g as c,d as g,A as r,w as u};
