import{c as _,r as v,u as T,a as k,_ as ze,a0 as P,t as me,a1 as Ue,z as ye,a2 as we,j as e,a3 as H,a4 as Se,a5 as A,f as ie,a6 as q,a7 as W,a8 as G,W as V,a9 as J,aa as Ae,ab as ke,ac as le,ad as wt,ae as Qe,af as oe,ag as Q,ah as jt,O as Ve,ai as He,J as I,aj as z,ak as se,al as ce,am as vt,m as j,A as qe,I as X,an as We,ao as Nt,e as $,ap as Ge,aq as Ct,ar as Mt,as as ae,at as Et,au as Ye,av as St,i as Xe,aw as Ze,ax as At,ay as kt,az as Rt,aA as Pt,aB as It,aC as Ot,aD as Dt,aE as Ft,aF as Tt,aG as _t,aH as Lt,aI as Bt,aJ as $t,aK as de,aL as he,aM as Re,aN as Pe,aO as zt,aP as Ut,aQ as Qt,aR as Vt,aS as te,aT as Ie,k as Oe,aU as Ht,aV as De,aW as Fe,aX as qt,aY as Wt,aZ as Te,S as Gt,a_ as Yt,w as Ke,a$ as Xt,b0 as Zt,b1 as Kt,b2 as Je,b3 as Jt,b4 as es,b5 as _e,Z as ts,N as ss}from"./index.59694a49.js";import{A as as,a as rs,b as ns,c as is}from"./accordion.31111ca3.js";import{r as je,c as Z}from"./charge.71dc8391.js";import{g as ls,c as fe,a as os}from"./request.5780f103.js";import{P as cs}from"./icons.58236968.js";import{U as ds}from"./users.29f7cbd5.js";import{C as us}from"./calendar-clock.6066c086.js";import{S as ms}from"./star.9bdb305d.js";/**
 * @license lucide-react v0.483.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],fs=_("BadgeCheck",hs);/**
 * @license lucide-react v0.483.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 18V6",key:"zqpxq5"}]],ps=_("BadgeDollarSign",xs);/**
 * @license lucide-react v0.483.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],bs=_("BadgeMinus",gs);/**
 * @license lucide-react v0.483.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]],ws=_("CircleArrowDown",ys);/**
 * @license lucide-react v0.483.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],vs=_("Coins",js);/**
 * @license lucide-react v0.483.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Cs=_("Crown",Ns);/**
 * @license lucide-react v0.483.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],et=_("Gift",Ms);/**
 * @license lucide-react v0.483.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],Ss=_("Percent",Es);/**
 * @license lucide-react v0.483.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],ks=_("Rocket",As);/**
 * @license lucide-react v0.483.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rs=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],tt=_("ShoppingCart",Rs);var pe=new Map,re=new WeakMap,Le=0,Ps=void 0;function Is(t){return t?(re.has(t)||(Le+=1,re.set(t,Le.toString())),re.get(t)):"0"}function Os(t){return Object.keys(t).sort().filter(i=>t[i]!==void 0).map(i=>`${i}_${i==="root"?Is(t.root):t[i]}`).toString()}function Ds(t){const i=Os(t);let r=pe.get(i);if(!r){const o=new Map;let h;const d=new IntersectionObserver(g=>{g.forEach(x=>{var s;const n=x.isIntersecting&&h.some(a=>x.intersectionRatio>=a);t.trackVisibility&&typeof x.isVisible>"u"&&(x.isVisible=n),(s=o.get(x.target))==null||s.forEach(a=>{a(n,x)})})},t);h=d.thresholds||(Array.isArray(t.threshold)?t.threshold:[t.threshold||0]),r={id:i,observer:d,elements:o},pe.set(i,r)}return r}function Fs(t,i,r={},o=Ps){if(typeof window.IntersectionObserver>"u"&&o!==void 0){const s=t.getBoundingClientRect();return i(o,{isIntersecting:o,target:t,intersectionRatio:typeof r.threshold=="number"?r.threshold:0,time:0,boundingClientRect:s,intersectionRect:s,rootBounds:s}),()=>{}}const{id:h,observer:d,elements:g}=Ds(r),x=g.get(t)||[];return g.has(t)||g.set(t,x),x.push(i),d.observe(t),function(){x.splice(x.indexOf(i),1),x.length===0&&(g.delete(t),d.unobserve(t)),g.size===0&&(d.disconnect(),pe.delete(h))}}function Ts({threshold:t,delay:i,trackVisibility:r,rootMargin:o,root:h,triggerOnce:d,skip:g,initialInView:x,fallbackInView:s,onChange:n}={}){var a;const[l,c]=v.useState(null),f=v.useRef(),[u,p]=v.useState({inView:!!x,entry:void 0});f.current=n,v.useEffect(()=>{if(g||!l)return;let w;return w=Fs(l,(M,E)=>{p({inView:M,entry:E}),f.current&&f.current(M,E),E.isIntersecting&&d&&w&&(w(),w=void 0)},{root:h,rootMargin:o,threshold:t,trackVisibility:r,delay:i},s),()=>{w&&w()}},[Array.isArray(t)?t.toString():t,l,h,o,d,g,r,s,i]);const m=(a=u.entry)==null?void 0:a.target,b=v.useRef();!l&&m&&!d&&!g&&b.current!==m&&(b.current=m,p({inView:!!x,entry:void 0}));const y=[c,u.inView,u.entry];return y.ref=y[0],y.inView=y[1],y.entry=y[2],y}function xe(t,i,r){const o=Q(t,i)*r,h=t.find(d=>d.level===i);if(h&&h.discounts){const d=h.discounts[r.toString()];if(d!==void 0)return o*d}return r>=36?o*.7:r>=12?o*.8:r>=6?o*.9:o}function _s(t,i,r,o){const d=(Q(t,r)-Q(t,i))/30*o;return(d>0?d+1:0)+1}function Ls(t,i,r){const o=t.find(h=>h.level===i);if(o&&o.discounts){const h=o.discounts[r.toString()];if(h!==void 0)return Math.round((1-h)*100)}return r>=36?30:r>=12?20:r>=6?10:null}async function Bs(t,i,r,o,h){const d=await He(i,r);return d.status?I.success(t("sub.success"),{description:t("sub.success-prompt",{month:i})}):(I.error(t("sub.failed"),{description:e.jsx("span",{style:{whiteSpace:"pre-wrap"},children:z?t("sub.failed-prompt"):t("sub.failed-quota-prompt",{quota:o.toFixed(2),required_quota:h.toFixed(2)})}),action:z?{label:t("buy.go"),onClick:()=>{se(`${ce}/home/wallet`)}}:void 0}),z&&setTimeout(()=>{se(`${ce}/home/wallet`)},2e3)),d.status}async function $s(t,i){const r=await He(1,i);return r.status?I.success(t("sub.migrate-success"),{description:t("sub.migrate-success-prompt")}):I.error(t("sub.migrate-failed"),{description:e.jsx("span",{style:{whiteSpace:"pre-wrap"},children:t("sub.sub-migrate-failed-prompt",{reason:r.error})})}),r.status}function zs({level:t,current:i,isYearly:r}){const{t:o}=T(),h=k(ze),[d,g]=P.useState(!1),[x,s]=P.useState(1),n=me(),a=k(Ue),l=k(ye),c=v.useMemo(()=>i===t,[i,t]),f=v.useMemo(()=>i<t,[i,t]),{symbol:u,name:p}=we(),m=v.useMemo(()=>je(p),[p]);return v.useEffect(()=>{s(r?12:1)},[r]),i===0||i===t?e.jsxs(H,{open:d,onOpenChange:g,children:[e.jsx(Se,{asChild:!0,children:e.jsxs(A,{tapScale:.975,classNameWrapper:"w-full",className:"action w-full",variant:"default",children:[e.jsx(ie,{icon:e.jsx(tt,{}),className:"h-4 w-4 mr-1.5"}),o(c?"sub.renew":"sub.subscribe")]})}),e.jsxs(q,{className:"flex-dialog",children:[e.jsx(W,{children:e.jsx(G,{children:o("sub.select-time")})}),e.jsx("div",{className:"upgrade-wrapper grid md:grid-cols-2 gap-4 w-full",children:[1,3,6,12].map(b=>e.jsxs("button",{className:`w-full p-4 rounded-lg border ${x===b?"border-primary bg-muted/20":"border hover:border-primary/50"} transition-all duration-200 ease-in-out flex justify-between items-center`,onClick:()=>s(b),children:[e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("span",{className:"font-semibold",children:o(`sub.time.${b}`)}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-sm",children:u}),e.jsx("span",{className:"text-sm font-bold",children:xe(l,t,b).toFixed(2)}),e.jsxs("span",{className:"text-xs ml-2 inline-flex items-center text-muted-foreground px-1.5 py-0.5 rounded-md border bg-muted/30",children:[e.jsx(V,{className:"h-3 w-3 mr-1"}),Z(xe(l,t,b),m).toFixed(0)]})]})]}),(()=>{const y=Ls(l,t,b);return y?e.jsxs("div",{className:"ml-2 text-xs text-secondary !text-[#55b467] !bg-[#f4fdeb] !border !border-[#55b467]/20 px-1.5 py-0.5 rounded-full",children:[y,"%"]}):null})()]},b))}),e.jsxs(J,{className:"translate-y-1.5",children:[e.jsx(Ae,{asChild:!0,children:e.jsx(A,{unClickable:!0,variant:"outline",children:o("cancel")})}),e.jsxs(A,{unClickable:!0,loading:!0,className:"mb-1.5",onClick:async()=>{const b=Z(xe(l,t,x),m),y=Math.max(0,b-a);await Bs(o,x,t,a,y)&&(g(!1),n(ke()))},children:[e.jsx(le,{className:"h-4 w-4 mr-1"}),o("confirm")]})]})]})]}):e.jsxs(H,{open:d,onOpenChange:g,children:[e.jsx(Se,{asChild:!0,children:e.jsxs(A,{className:"action w-full",variant:f?"default":"outline",tapScale:.975,classNameWrapper:"w-full",children:[e.jsx(ie,{icon:f?e.jsx(wt,{}):e.jsx(ws,{}),className:"h-4 w-4 mr-1.5"}),o(f?"sub.upgrade":"sub.downgrade")]})}),e.jsxs(q,{className:"flex-dialog",children:[e.jsx(W,{children:e.jsx(G,{children:o("sub.migrate-plan")})}),e.jsxs("div",{className:"upgrade-wrapper text-md p-2 border rounded-lg bg-secondary/50 !mt-0.5",children:[e.jsx(Qe,{className:"h-4 w-4 mr-1 inline-block"}),o("sub.migrate-plan-desc")]}),e.jsxs("div",{className:"flex items-center justify-between space-x-2 mt-3",children:[e.jsxs("div",{className:"flex-1 p-3 border rounded-md bg-background",children:[e.jsx("h3",{className:"text-base font-medium",children:o("sub.current")}),e.jsx("p",{className:"text-xs text-muted-foreground",children:o(`sub.${oe(i)}`)}),e.jsxs("p",{className:"text-lg font-medium flex items-center",children:[u,Q(l,i).toFixed(2),"/",o("sub.month"),e.jsxs("span",{className:"text-xs ml-2 inline-flex items-center text-muted-foreground px-1.5 py-0.5 rounded-md border bg-muted/30",children:[e.jsx(V,{className:"h-3 w-3 mr-1"}),Z(Q(l,i),m).toFixed(0)]})]})]}),e.jsx(jt,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{className:"flex-1 p-3 border rounded-md bg-background",children:[e.jsx("h3",{className:"text-base font-medium",children:o("sub.new")}),e.jsx("p",{className:"text-xs text-muted-foreground",children:o(`sub.${oe(t)}`)}),e.jsxs("p",{className:"text-lg font-medium flex items-center",children:[u,Q(l,t).toFixed(2),"/",o("sub.month"),e.jsxs("span",{className:"text-xs ml-2 inline-flex items-center text-muted-foreground px-1.5 py-0.5 rounded-md border bg-muted/30",children:[e.jsx(V,{className:"h-3 w-3 mr-1"}),Z(Q(l,t),m).toFixed(0)]})]})]})]}),f&&e.jsxs("div",{className:"flex items-center justify-center flex-col p-3 bg-secondary/20 rounded-md mt-2",children:[e.jsxs("span",{className:"mb-0.5 flex items-center",children:[o("sub.upgrade-price-label"),e.jsx(Ve,{content:o("sub.upgrade-price-notice-tip")})]}),e.jsxs("div",{className:"flex items-center px-1.5 py-0.5 rounded-lg text-amber-500 bg-amber-400/10 border border-amber-400/30",children:[e.jsx("span",{className:"text-sm font-medium",children:u}),e.jsx("span",{className:"text-md font-medium",children:_s(l,i,t,h).toFixed(2)})]})]}),e.jsxs(J,{children:[e.jsx(Ae,{asChild:!0,children:e.jsx(A,{unClickable:!0,variant:"outline",children:o("cancel")})}),e.jsxs(A,{unClickable:!0,loading:!0,className:"mb-1.5",onClick:async()=>{await $s(o,t)&&(g(!1),n(ke()))},children:[e.jsx(le,{className:"h-4 w-4 mr-1"}),o("confirm")]})]})]})]})}function Us({name:t,usage:i}){if(!i)return null;const r=i.total===-1,o=i.used,h=r?"âˆž":i.total;return e.jsxs("div",{className:"sub-column-wrapper inline-flex flex-col",children:[e.jsxs("div",{className:"sub-column",children:[e.jsx("div",{className:"flex items-center text-sm text-secondary",children:t}),e.jsx("div",{className:"grow"}),e.jsx("div",{className:"sub-value font-medium text-md",children:r?e.jsx("p",{children:o}):e.jsxs(e.Fragment,{children:[e.jsx("p",{children:o}),e.jsxs("p",{className:"text-secondary !font-normal text-sm",children:["/",h]})]})})]}),e.jsx(vt,{className:"w-full h-2",value:i.used,max:i.total})]})}function Be({amount:t,active:i,other:r,onClick:o}){const{t:h}=T(),d=k(We),{symbol:g}=we(),x=v.useRef(null),s=()=>{var a;o==null||o(),(a=x.current)==null||a.focus()},n=t*d;return e.jsxs(Nt,{className:$("amount bg-input/10 dark:bg-input/20 shadow-sm h-full",i&&"active"),onClick:s,tapScale:.975,children:[i&&e.jsx(Ge,{className:"h-5 w-5 p-1 bg-primary/5 dark:bg-primary/10 rounded-full absolute top-2 right-2 text-primary"}),r?e.jsx(e.Fragment,{children:e.jsx("div",{className:"other my-auto",children:h("buy.other")})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"amount-title",children:[(t*10).toFixed(0),e.jsx(V,{className:"h-4 w-4"})]}),e.jsxs("div",{className:"amount-desc text-xs",children:[e.jsx("span",{className:"text-2xs",children:g}),n.toFixed(2),d!==1&&e.jsxs("span",{className:"text-2xs px-1 py-0.5 text-green-500 bg-green-500/10 rounded-sm ml-0.5",children:[(d*100).toFixed(0),"%"]})]})]})]})}function Qs({current:t,onCurrentChange:i,onAmountChange:r,builtinAmount:o}){const h=o.length,[d,g]=v.useState(""),x={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05}}},s={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:300,damping:20}}},n=a=>{let l=a.target.value.trim()||"0";l.startsWith("0")&&l.length>1&&(l=l.replace(/^0+/,"")),/^\d+$/.test(l)&&(g(l),r(Number(l)))};return e.jsxs(j.div,{className:"amount-container",initial:"hidden",animate:"visible",variants:x,children:[e.jsx("div",{className:"amount-wrapper",children:e.jsxs(qe,{children:[o.map((a,l)=>e.jsx(j.div,{variants:s,children:e.jsx(Be,{amount:a,active:t===l,onClick:()=>{i(l),r(a*10)}})},l)),e.jsx(j.div,{variants:s,children:e.jsx(Be,{amount:NaN,other:!0,active:t===h,onClick:()=>i(h),onAmountChange:r})})]})}),t===h&&e.jsxs("div",{className:"mt-0.5 relative w-full",children:[e.jsx(X,{type:"number",className:"w-full pl-10 text-center",value:d,onChange:n,maxLength:8}),e.jsx(V,{className:"h-4 w-4 absolute left-2.5 top-1/2 -translate-y-1/2"})]})]})}function ne({step:t,label:i,children:r,className:o,...h}){const d={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}};return e.jsxs(j.div,{className:$(`step step-${t} group flex flex-row items-center cursor-pointer text-center`,o),variants:d,initial:"hidden",animate:"visible",transition:{duration:.3,delay:t*.2},...h,children:[e.jsx(j.div,{className:$("step-number h-6 w-6 flex items-center justify-center shrink-0","bg-primary text-background rounded-full","text-sm font-bold border shadow mr-1.5","cursor-pointer select-none","transition duration-300 ease-in-out","group-hover:bg-background group-hover:text-primary"),whileHover:{scale:1.1},whileTap:{scale:.9},children:t}),e.jsx(j.div,{className:"step-label text-primary text-sm",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3,delay:t*.2+.2},children:i}),r]})}async function Vs(t){try{return(await Ct.get(`/redeem?code=${t}`)).data}catch(i){return console.debug(i),{status:!1,error:`network error: ${Mt(i)}`,quota:0}}}var Hs=Object.defineProperty,ue=Object.getOwnPropertySymbols,st=Object.prototype.hasOwnProperty,at=Object.prototype.propertyIsEnumerable,$e=(t,i,r)=>i in t?Hs(t,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[i]=r,ge=(t,i)=>{for(var r in i||(i={}))st.call(i,r)&&$e(t,r,i[r]);if(ue)for(var r of ue(i))at.call(i,r)&&$e(t,r,i[r]);return t},be=(t,i)=>{var r={};for(var o in t)st.call(t,o)&&i.indexOf(o)<0&&(r[o]=t[o]);if(t!=null&&ue)for(var o of ue(t))i.indexOf(o)<0&&at.call(t,o)&&(r[o]=t[o]);return r};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Y;(t=>{const i=class C{constructor(s,n,a,l){if(this.version=s,this.errorCorrectionLevel=n,this.modules=[],this.isFunction=[],s<C.MIN_VERSION||s>C.MAX_VERSION)throw new RangeError("Version value out of range");if(l<-1||l>7)throw new RangeError("Mask value out of range");this.size=s*4+17;let c=[];for(let u=0;u<this.size;u++)c.push(!1);for(let u=0;u<this.size;u++)this.modules.push(c.slice()),this.isFunction.push(c.slice());this.drawFunctionPatterns();const f=this.addEccAndInterleave(a);if(this.drawCodewords(f),l==-1){let u=1e9;for(let p=0;p<8;p++){this.applyMask(p),this.drawFormatBits(p);const m=this.getPenaltyScore();m<u&&(l=p,u=m),this.applyMask(p)}}h(0<=l&&l<=7),this.mask=l,this.applyMask(l),this.drawFormatBits(l),this.isFunction=[]}static encodeText(s,n){const a=t.QrSegment.makeSegments(s);return C.encodeSegments(a,n)}static encodeBinary(s,n){const a=t.QrSegment.makeBytes(s);return C.encodeSegments([a],n)}static encodeSegments(s,n,a=1,l=40,c=-1,f=!0){if(!(C.MIN_VERSION<=a&&a<=l&&l<=C.MAX_VERSION)||c<-1||c>7)throw new RangeError("Invalid value");let u,p;for(u=a;;u++){const w=C.getNumDataCodewords(u,n)*8,M=g.getTotalBits(s,u);if(M<=w){p=M;break}if(u>=l)throw new RangeError("Data too long")}for(const w of[C.Ecc.MEDIUM,C.Ecc.QUARTILE,C.Ecc.HIGH])f&&p<=C.getNumDataCodewords(u,w)*8&&(n=w);let m=[];for(const w of s){r(w.mode.modeBits,4,m),r(w.numChars,w.mode.numCharCountBits(u),m);for(const M of w.getData())m.push(M)}h(m.length==p);const b=C.getNumDataCodewords(u,n)*8;h(m.length<=b),r(0,Math.min(4,b-m.length),m),r(0,(8-m.length%8)%8,m),h(m.length%8==0);for(let w=236;m.length<b;w^=253)r(w,8,m);let y=[];for(;y.length*8<m.length;)y.push(0);return m.forEach((w,M)=>y[M>>>3]|=w<<7-(M&7)),new C(u,n,y,c)}getModule(s,n){return 0<=s&&s<this.size&&0<=n&&n<this.size&&this.modules[n][s]}getModules(){return this.modules}drawFunctionPatterns(){for(let a=0;a<this.size;a++)this.setFunctionModule(6,a,a%2==0),this.setFunctionModule(a,6,a%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const s=this.getAlignmentPatternPositions(),n=s.length;for(let a=0;a<n;a++)for(let l=0;l<n;l++)a==0&&l==0||a==0&&l==n-1||a==n-1&&l==0||this.drawAlignmentPattern(s[a],s[l]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(s){const n=this.errorCorrectionLevel.formatBits<<3|s;let a=n;for(let c=0;c<10;c++)a=a<<1^(a>>>9)*1335;const l=(n<<10|a)^21522;h(l>>>15==0);for(let c=0;c<=5;c++)this.setFunctionModule(8,c,o(l,c));this.setFunctionModule(8,7,o(l,6)),this.setFunctionModule(8,8,o(l,7)),this.setFunctionModule(7,8,o(l,8));for(let c=9;c<15;c++)this.setFunctionModule(14-c,8,o(l,c));for(let c=0;c<8;c++)this.setFunctionModule(this.size-1-c,8,o(l,c));for(let c=8;c<15;c++)this.setFunctionModule(8,this.size-15+c,o(l,c));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let s=this.version;for(let a=0;a<12;a++)s=s<<1^(s>>>11)*7973;const n=this.version<<12|s;h(n>>>18==0);for(let a=0;a<18;a++){const l=o(n,a),c=this.size-11+a%3,f=Math.floor(a/3);this.setFunctionModule(c,f,l),this.setFunctionModule(f,c,l)}}drawFinderPattern(s,n){for(let a=-4;a<=4;a++)for(let l=-4;l<=4;l++){const c=Math.max(Math.abs(l),Math.abs(a)),f=s+l,u=n+a;0<=f&&f<this.size&&0<=u&&u<this.size&&this.setFunctionModule(f,u,c!=2&&c!=4)}}drawAlignmentPattern(s,n){for(let a=-2;a<=2;a++)for(let l=-2;l<=2;l++)this.setFunctionModule(s+l,n+a,Math.max(Math.abs(l),Math.abs(a))!=1)}setFunctionModule(s,n,a){this.modules[n][s]=a,this.isFunction[n][s]=!0}addEccAndInterleave(s){const n=this.version,a=this.errorCorrectionLevel;if(s.length!=C.getNumDataCodewords(n,a))throw new RangeError("Invalid argument");const l=C.NUM_ERROR_CORRECTION_BLOCKS[a.ordinal][n],c=C.ECC_CODEWORDS_PER_BLOCK[a.ordinal][n],f=Math.floor(C.getNumRawDataModules(n)/8),u=l-f%l,p=Math.floor(f/l);let m=[];const b=C.reedSolomonComputeDivisor(c);for(let w=0,M=0;w<l;w++){let E=s.slice(M,M+p-c+(w<u?0:1));M+=E.length;const O=C.reedSolomonComputeRemainder(E,b);w<u&&E.push(0),m.push(E.concat(O))}let y=[];for(let w=0;w<m[0].length;w++)m.forEach((M,E)=>{(w!=p-c||E>=u)&&y.push(M[w])});return h(y.length==f),y}drawCodewords(s){if(s.length!=Math.floor(C.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let n=0;for(let a=this.size-1;a>=1;a-=2){a==6&&(a=5);for(let l=0;l<this.size;l++)for(let c=0;c<2;c++){const f=a-c,p=(a+1&2)==0?this.size-1-l:l;!this.isFunction[p][f]&&n<s.length*8&&(this.modules[p][f]=o(s[n>>>3],7-(n&7)),n++)}}h(n==s.length*8)}applyMask(s){if(s<0||s>7)throw new RangeError("Mask value out of range");for(let n=0;n<this.size;n++)for(let a=0;a<this.size;a++){let l;switch(s){case 0:l=(a+n)%2==0;break;case 1:l=n%2==0;break;case 2:l=a%3==0;break;case 3:l=(a+n)%3==0;break;case 4:l=(Math.floor(a/3)+Math.floor(n/2))%2==0;break;case 5:l=a*n%2+a*n%3==0;break;case 6:l=(a*n%2+a*n%3)%2==0;break;case 7:l=((a+n)%2+a*n%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[n][a]&&l&&(this.modules[n][a]=!this.modules[n][a])}}getPenaltyScore(){let s=0;for(let c=0;c<this.size;c++){let f=!1,u=0,p=[0,0,0,0,0,0,0];for(let m=0;m<this.size;m++)this.modules[c][m]==f?(u++,u==5?s+=C.PENALTY_N1:u>5&&s++):(this.finderPenaltyAddHistory(u,p),f||(s+=this.finderPenaltyCountPatterns(p)*C.PENALTY_N3),f=this.modules[c][m],u=1);s+=this.finderPenaltyTerminateAndCount(f,u,p)*C.PENALTY_N3}for(let c=0;c<this.size;c++){let f=!1,u=0,p=[0,0,0,0,0,0,0];for(let m=0;m<this.size;m++)this.modules[m][c]==f?(u++,u==5?s+=C.PENALTY_N1:u>5&&s++):(this.finderPenaltyAddHistory(u,p),f||(s+=this.finderPenaltyCountPatterns(p)*C.PENALTY_N3),f=this.modules[m][c],u=1);s+=this.finderPenaltyTerminateAndCount(f,u,p)*C.PENALTY_N3}for(let c=0;c<this.size-1;c++)for(let f=0;f<this.size-1;f++){const u=this.modules[c][f];u==this.modules[c][f+1]&&u==this.modules[c+1][f]&&u==this.modules[c+1][f+1]&&(s+=C.PENALTY_N2)}let n=0;for(const c of this.modules)n=c.reduce((f,u)=>f+(u?1:0),n);const a=this.size*this.size,l=Math.ceil(Math.abs(n*20-a*10)/a)-1;return h(0<=l&&l<=9),s+=l*C.PENALTY_N4,h(0<=s&&s<=2568888),s}getAlignmentPatternPositions(){if(this.version==1)return[];{const s=Math.floor(this.version/7)+2,n=this.version==32?26:Math.ceil((this.version*4+4)/(s*2-2))*2;let a=[6];for(let l=this.size-7;a.length<s;l-=n)a.splice(1,0,l);return a}}static getNumRawDataModules(s){if(s<C.MIN_VERSION||s>C.MAX_VERSION)throw new RangeError("Version number out of range");let n=(16*s+128)*s+64;if(s>=2){const a=Math.floor(s/7)+2;n-=(25*a-10)*a-55,s>=7&&(n-=36)}return h(208<=n&&n<=29648),n}static getNumDataCodewords(s,n){return Math.floor(C.getNumRawDataModules(s)/8)-C.ECC_CODEWORDS_PER_BLOCK[n.ordinal][s]*C.NUM_ERROR_CORRECTION_BLOCKS[n.ordinal][s]}static reedSolomonComputeDivisor(s){if(s<1||s>255)throw new RangeError("Degree out of range");let n=[];for(let l=0;l<s-1;l++)n.push(0);n.push(1);let a=1;for(let l=0;l<s;l++){for(let c=0;c<n.length;c++)n[c]=C.reedSolomonMultiply(n[c],a),c+1<n.length&&(n[c]^=n[c+1]);a=C.reedSolomonMultiply(a,2)}return n}static reedSolomonComputeRemainder(s,n){let a=n.map(l=>0);for(const l of s){const c=l^a.shift();a.push(0),n.forEach((f,u)=>a[u]^=C.reedSolomonMultiply(f,c))}return a}static reedSolomonMultiply(s,n){if(s>>>8||n>>>8)throw new RangeError("Byte out of range");let a=0;for(let l=7;l>=0;l--)a=a<<1^(a>>>7)*285,a^=(n>>>l&1)*s;return h(a>>>8==0),a}finderPenaltyCountPatterns(s){const n=s[1];h(n<=this.size*3);const a=n>0&&s[2]==n&&s[3]==n*3&&s[4]==n&&s[5]==n;return(a&&s[0]>=n*4&&s[6]>=n?1:0)+(a&&s[6]>=n*4&&s[0]>=n?1:0)}finderPenaltyTerminateAndCount(s,n,a){return s&&(this.finderPenaltyAddHistory(n,a),n=0),n+=this.size,this.finderPenaltyAddHistory(n,a),this.finderPenaltyCountPatterns(a)}finderPenaltyAddHistory(s,n){n[0]==0&&(s+=this.size),n.pop(),n.unshift(s)}};i.MIN_VERSION=1,i.MAX_VERSION=40,i.PENALTY_N1=3,i.PENALTY_N2=3,i.PENALTY_N3=40,i.PENALTY_N4=10,i.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],i.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=i;function r(x,s,n){if(s<0||s>31||x>>>s)throw new RangeError("Value out of range");for(let a=s-1;a>=0;a--)n.push(x>>>a&1)}function o(x,s){return(x>>>s&1)!=0}function h(x){if(!x)throw new Error("Assertion error")}const d=class R{constructor(s,n,a){if(this.mode=s,this.numChars=n,this.bitData=a,n<0)throw new RangeError("Invalid argument");this.bitData=a.slice()}static makeBytes(s){let n=[];for(const a of s)r(a,8,n);return new R(R.Mode.BYTE,s.length,n)}static makeNumeric(s){if(!R.isNumeric(s))throw new RangeError("String contains non-numeric characters");let n=[];for(let a=0;a<s.length;){const l=Math.min(s.length-a,3);r(parseInt(s.substring(a,a+l),10),l*3+1,n),a+=l}return new R(R.Mode.NUMERIC,s.length,n)}static makeAlphanumeric(s){if(!R.isAlphanumeric(s))throw new RangeError("String contains unencodable characters in alphanumeric mode");let n=[],a;for(a=0;a+2<=s.length;a+=2){let l=R.ALPHANUMERIC_CHARSET.indexOf(s.charAt(a))*45;l+=R.ALPHANUMERIC_CHARSET.indexOf(s.charAt(a+1)),r(l,11,n)}return a<s.length&&r(R.ALPHANUMERIC_CHARSET.indexOf(s.charAt(a)),6,n),new R(R.Mode.ALPHANUMERIC,s.length,n)}static makeSegments(s){return s==""?[]:R.isNumeric(s)?[R.makeNumeric(s)]:R.isAlphanumeric(s)?[R.makeAlphanumeric(s)]:[R.makeBytes(R.toUtf8ByteArray(s))]}static makeEci(s){let n=[];if(s<0)throw new RangeError("ECI assignment value out of range");if(s<128)r(s,8,n);else if(s<16384)r(2,2,n),r(s,14,n);else if(s<1e6)r(6,3,n),r(s,21,n);else throw new RangeError("ECI assignment value out of range");return new R(R.Mode.ECI,0,n)}static isNumeric(s){return R.NUMERIC_REGEX.test(s)}static isAlphanumeric(s){return R.ALPHANUMERIC_REGEX.test(s)}getData(){return this.bitData.slice()}static getTotalBits(s,n){let a=0;for(const l of s){const c=l.mode.numCharCountBits(n);if(l.numChars>=1<<c)return 1/0;a+=4+c+l.bitData.length}return a}static toUtf8ByteArray(s){s=encodeURI(s);let n=[];for(let a=0;a<s.length;a++)s.charAt(a)!="%"?n.push(s.charCodeAt(a)):(n.push(parseInt(s.substring(a+1,a+3),16)),a+=2);return n}};d.NUMERIC_REGEX=/^[0-9]*$/,d.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,d.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let g=d;t.QrSegment=d})(Y||(Y={}));(t=>{(i=>{const r=class{constructor(h,d){this.ordinal=h,this.formatBits=d}};r.LOW=new r(0,1),r.MEDIUM=new r(1,0),r.QUARTILE=new r(2,3),r.HIGH=new r(3,2),i.Ecc=r})(t.QrCode||(t.QrCode={}))})(Y||(Y={}));(t=>{(i=>{const r=class{constructor(h,d){this.modeBits=h,this.numBitsCharCount=d}numCharCountBits(h){return this.numBitsCharCount[Math.floor((h+7)/17)]}};r.NUMERIC=new r(1,[10,12,14]),r.ALPHANUMERIC=new r(2,[9,11,13]),r.BYTE=new r(4,[8,16,16]),r.KANJI=new r(8,[8,10,12]),r.ECI=new r(7,[0,0,0]),i.Mode=r})(t.QrSegment||(t.QrSegment={}))})(Y||(Y={}));var K=Y;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var qs={L:K.QrCode.Ecc.LOW,M:K.QrCode.Ecc.MEDIUM,Q:K.QrCode.Ecc.QUARTILE,H:K.QrCode.Ecc.HIGH},rt=128,nt="L",it="#FFFFFF",lt="#000000",ot=!1,ct=1,Ws=4,Gs=0,Ys=.1;function dt(t,i=0){const r=[];return t.forEach(function(o,h){let d=null;o.forEach(function(g,x){if(!g&&d!==null){r.push(`M${d+i} ${h+i}h${x-d}v1H${d+i}z`),d=null;return}if(x===o.length-1){if(!g)return;d===null?r.push(`M${x+i},${h+i} h1v1H${x+i}z`):r.push(`M${d+i},${h+i} h${x+1-d}v1H${d+i}z`);return}g&&d===null&&(d=x)})}),r.join("")}function ut(t,i){return t.slice().map((r,o)=>o<i.y||o>=i.y+i.h?r:r.map((h,d)=>d<i.x||d>=i.x+i.w?h:!1))}function Xs(t,i,r,o){if(o==null)return null;const h=t.length+r*2,d=Math.floor(i*Ys),g=h/i,x=(o.width||d)*g,s=(o.height||d)*g,n=o.x==null?t.length/2-x/2:o.x*g,a=o.y==null?t.length/2-s/2:o.y*g,l=o.opacity==null?1:o.opacity;let c=null;if(o.excavate){let u=Math.floor(n),p=Math.floor(a),m=Math.ceil(x+n-u),b=Math.ceil(s+a-p);c={x:u,y:p,w:m,h:b}}const f=o.crossOrigin;return{x:n,y:a,h:s,w:x,excavation:c,opacity:l,crossOrigin:f}}function Zs(t,i){return i!=null?Math.max(Math.floor(i),0):t?Ws:Gs}function mt({value:t,level:i,minVersion:r,includeMargin:o,marginSize:h,imageSettings:d,size:g,boostLevel:x}){let s=P.useMemo(()=>{const u=(Array.isArray(t)?t:[t]).reduce((p,m)=>(p.push(...K.QrSegment.makeSegments(m)),p),[]);return K.QrCode.encodeSegments(u,qs[i],r,void 0,void 0,x)},[t,i,r,x]);const{cells:n,margin:a,numCells:l,calculatedImageSettings:c}=P.useMemo(()=>{let f=s.getModules();const u=Zs(o,h),p=f.length+u*2,m=Xs(f,g,u,d);return{cells:f,margin:u,numCells:p,calculatedImageSettings:m}},[s,g,d,o,h]);return{qrcode:s,margin:a,cells:n,numCells:l,calculatedImageSettings:c}}var Ks=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),Js=P.forwardRef(function(i,r){const o=i,{value:h,size:d=rt,level:g=nt,bgColor:x=it,fgColor:s=lt,includeMargin:n=ot,minVersion:a=ct,boostLevel:l,marginSize:c,imageSettings:f}=o,p=be(o,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:m}=p,b=be(p,["style"]),y=f==null?void 0:f.src,w=P.useRef(null),M=P.useRef(null),E=P.useCallback(U=>{w.current=U,typeof r=="function"?r(U):r&&(r.current=U)},[r]),[O,F]=P.useState(!1),{margin:D,cells:L,numCells:N,calculatedImageSettings:S}=mt({value:h,level:g,minVersion:a,boostLevel:l,includeMargin:n,marginSize:c,imageSettings:f,size:d});P.useEffect(()=>{if(w.current!=null){const U=w.current,B=U.getContext("2d");if(!B)return;let Ne=L;const ee=M.current,Ce=S!=null&&ee!==null&&ee.complete&&ee.naturalHeight!==0&&ee.naturalWidth!==0;Ce&&S.excavation!=null&&(Ne=ut(L,S.excavation));const Me=window.devicePixelRatio||1;U.height=U.width=d*Me;const Ee=d/N*Me;B.scale(Ee,Ee),B.fillStyle=x,B.fillRect(0,0,N,N),B.fillStyle=s,Ks?B.fill(new Path2D(dt(Ne,D))):L.forEach(function(pt,gt){pt.forEach(function(bt,yt){bt&&B.fillRect(yt+D,gt+D,1,1)})}),S&&(B.globalAlpha=S.opacity),Ce&&B.drawImage(ee,S.x+D,S.y+D,S.w,S.h)}}),P.useEffect(()=>{F(!1)},[y]);const xt=ge({height:d,width:d},m);let ve=null;return y!=null&&(ve=P.createElement("img",{src:y,key:y,style:{display:"none"},onLoad:()=>{F(!0)},ref:M,crossOrigin:S==null?void 0:S.crossOrigin})),P.createElement(P.Fragment,null,P.createElement("canvas",ge({style:xt,height:d,width:d,ref:E,role:"img"},b)),ve)});Js.displayName="QRCodeCanvas";var ht=P.forwardRef(function(i,r){const o=i,{value:h,size:d=rt,level:g=nt,bgColor:x=it,fgColor:s=lt,includeMargin:n=ot,minVersion:a=ct,boostLevel:l,title:c,marginSize:f,imageSettings:u}=o,p=be(o,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:m,cells:b,numCells:y,calculatedImageSettings:w}=mt({value:h,level:g,minVersion:a,boostLevel:l,includeMargin:n,marginSize:f,imageSettings:u,size:d});let M=b,E=null;u!=null&&w!=null&&(w.excavation!=null&&(M=ut(b,w.excavation)),E=P.createElement("image",{href:u.src,height:w.h,width:w.w,x:w.x+m,y:w.y+m,preserveAspectRatio:"none",opacity:w.opacity,crossOrigin:w.crossOrigin}));const O=dt(M,m);return P.createElement("svg",ge({height:d,width:d,viewBox:`0 0 ${y} ${y}`,ref:r,role:"img"},p),!!c&&P.createElement("title",null,c),P.createElement("path",{fill:x,d:`M0,0 h${y}v${y}H0z`,shapeRendering:"crispEdges"}),P.createElement("path",{fill:s,d:O,shapeRendering:"crispEdges"}),E)});ht.displayName="QRCodeSVG";function ft({open:t,onOpenChange:i,qrCodeUrl:r,orderId:o,onSuccess:h,title:d,description:g,successText:x,remainingLabel:s}){const{t:n}=T(),[a,l]=v.useState(!1),[c,f]=v.useState(30*60),[u,p]=v.useState(!1);v.useEffect(()=>{if(!t||!o||a)return;const b=setInterval(async()=>{try{const y=await ls(o);y.status&&y.remaining_time!==void 0&&f(y.remaining_time),y.status&&y.order_state&&(l(!0),clearInterval(b),h(),setTimeout(()=>{i(!1)},1500))}catch{}},3e3);return()=>clearInterval(b)},[t,o,a,h,i]),v.useEffect(()=>{if(!t||a)return;const b=setInterval(()=>{f(y=>y<=1?(clearInterval(b),i(!1),0):y-1)},1e3);return()=>clearInterval(b)},[t,a,i]),v.useEffect(()=>{p(!1)},[r]);const m=b=>{const y=Math.floor(b/60),w=b%60;return`${y.toString().padStart(2,"0")}:${w.toString().padStart(2,"0")}`};return e.jsx(H,{open:t,onOpenChange:i,children:e.jsxs(q,{className:"sm:max-w-md flex-dialog",children:[e.jsxs(W,{children:[e.jsx(G,{children:d}),e.jsx(ae,{children:a?x:g})]}),e.jsx("div",{className:"flex flex-col items-center justify-center p-4",children:a?e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-green-100 flex items-center justify-center text-green-600",children:e.jsx(Ge,{className:"w-8 h-8"})}),e.jsx("p",{className:"text-center",children:x})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"relative w-64 h-64 bg-white p-2 rounded-md border mb-4",children:r?e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:u?e.jsx(ht,{value:r,size:248,level:"H",includeMargin:!1}):e.jsx("img",{src:r,alt:"qr",className:"max-w-[248px] max-h-[248px] object-contain",onError:()=>p(!0)})}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:n("payment.dialog-wechatpay.loading")})}),e.jsxs("div",{className:"text-center space-y-1",children:[e.jsx("div",{className:"flex items-center justify-center text-sm text-muted-foreground",children:e.jsx("span",{children:s})}),e.jsx("div",{className:"font-medium text-lg w-20 text-center mx-auto tabular-nums",children:m(c)})]})]})}),e.jsx(J,{className:"sm:justify-center",children:!a&&e.jsx(A,{type:"button",variant:"secondary",onClick:()=>i(!1),children:n("cancel")})})]})})}function ea(t){const{t:i}=T();return e.jsx(ft,{...t,title:i("payment.dialog-wechatpay.title"),description:i("payment.dialog-wechatpay.description"),successText:i("payment.dialog-wechatpay.success"),remainingLabel:i("payment.dialog-wechatpay.remaining-time")})}function ta(t){const{t:i}=T();return e.jsx(ft,{...t,title:i("payment.dialog-xunhupay.title"),description:i("payment.dialog-xunhupay.description"),successText:i("payment.dialog-xunhupay.success"),remainingLabel:i("payment.dialog-xunhupay.remaining-time")})}function sa(){const{t}=T(),[i,r]=v.useState(0),o=k(Et),h=k(Ue),d=k(We),g=k(Ye),x=k(St),s=(()=>{if(Array.isArray(g)&&g.length>0){const p=Number(g[0])||0,m=Z(p,je(x)),b=d&&d>0?d:1,y=m/b,w=Math.floor(y);return w>0?w:50}return 50})(),[n,a]=v.useState(s),[l,c]=v.useState(!1),f={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.1,when:"beforeChildren",staggerChildren:.1}}},u={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}};return e.jsxs(j.div,{className:"w-full h-fit md:mt-4",id:"quota",variants:f,initial:"hidden",animate:"visible",children:[e.jsx(ia,{open:l,onOpenChanged:c}),e.jsx(j.div,{className:"flex flex-col pb-4",variants:u,children:e.jsx(j.div,{className:"dialog-wrapper",variants:u,children:e.jsx(j.div,{className:"buy-interface",variants:u,children:e.jsxs(j.div,{className:"w-full h-fit mt-0 border rounded-lg p-2.5 bg-background flex flex-col md:flex-row",variants:u,children:[e.jsxs(j.div,{className:"flex flex-col w-full md:w-1/2 p-2.5 pb-4 md:pb-2.5 border-b md:border-r md:border-b-0",variants:u,children:[e.jsx(j.div,{className:"text-xs text-secondary mb-1",variants:u,children:t("buy.title")}),e.jsxs(j.div,{className:"text-2xl font-medium mb-1 jetbrains-mono",variants:u,children:[e.jsx(V,{className:"h-4 w-4 mr-1 inline-block"}),h.toFixed(2),d!==1&&e.jsxs("span",{className:"text-xs text-green-500 bg-green-500/10 py-0.5 px-1.5 rounded-sm ml-1",children:[(d*100).toFixed(),"%"]})]}),e.jsxs(j.div,{className:"text-xs text-secondary mt-auto break-all whitespace-pre-wrap",variants:u,children:[t("buy.quota-info"),e.jsxs("a",{href:Xe,target:"_blank",rel:"noopener noreferrer",className:"inline-block text-sky-500 hover:text-sky-600",children:[e.jsx(Ze,{className:"h-3.5 w-3.5 mr-0.5 ml-1 inline-block"}),t("buy.learn-more")]})]})]}),e.jsx(j.div,{className:"flex flex-col w-full md:w-1/2 pt-4 md:pt-0 md:pl-2",variants:u,children:e.jsx(j.div,{className:"flex flex-col items-center justify-center h-full",variants:u,children:e.jsxs(j.div,{className:"flex flex-col space-y-2 w-full px-1",variants:u,children:[e.jsx(aa,{current:i,onCurrentChange:r,amount:n,onAmountChange:a,username:o}),e.jsxs(A,{variant:"outline",className:"w-full transition-all hover:bg-secondary",onClick:()=>c(!0),children:[e.jsx(et,{className:"h-4 w-4 mr-2"}),t("buy.redeem-title")]})]})})})]})})})})]})}function aa({current:t,onCurrentChange:i,amount:r,onAmountChange:o,username:h}){const[d,g]=v.useState(!1),{t:x}=T(),s=k(Ye);return e.jsxs(e.Fragment,{children:[e.jsxs(A,{variant:"default",onClick:()=>g(!0),className:"w-full transition-all hover:shadow-md flex items-center justify-center",children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),x("buy.buy-link")]}),e.jsx(H,{open:d,onOpenChange:g,children:e.jsxs(q,{className:"flex-dialog pre-quota-dialog",children:[e.jsxs(W,{children:[e.jsx(G,{children:x("buy.dialog-title")}),e.jsx(ae,{children:x("buy.buy-description")})]}),e.jsxs("div",{children:[e.jsx(Qs,{current:t,onCurrentChange:i,amount:r,onAmountChange:o,builtinAmount:Array.isArray(s)&&s.length>0?s.map(n=>Number(n)).filter(n=>n>0):[5,10,20,50,100,500,1e3]}),e.jsx(ra,{amount:r,username:h}),z&&e.jsx(na,{})]})]})})]})}function ra({amount:t,username:i}){const{t:r}=T(),[o,h]=v.useState(!1),[d,g]=v.useState(!1),[x,s]=v.useState(!1),[n,a]=v.useState(""),[l,c]=v.useState(""),[f,u]=v.useState(""),p=me(),m=k(At),b=k(kt),y=()=>{p(de()),I.success(r("buy.success"),{description:r("buy.success-prompt",{amount:t})})},w=async()=>{if(b){const O=await fe("null",t,r("payment.order.quota",{quota:t}));if(he(r,O),O.status){const{url:F,params:D}=O.data;Re(F,"POST",D)}return g(!1)}if(!z)return Pe.trim().length===0?I.error(r("buy.not-config-link")):(se(`${Pe}?quota=${t}&username=${i}`,"_blank"),g(!1));const E=await zt(t);E.status?I.success(r("buy.success"),{description:r("buy.success-prompt",{amount:t})}):(I.error(r("buy.failed"),{description:`${r("buy.failed-prompt",{amount:t})}
${E.error}`,action:z?{label:r("buy.go"),onClick:()=>{se(`${ce}/home/wallet`)}}:void 0}),z&&setTimeout(()=>{se(`${ce}/home/wallet`)},2e3)),g(!1)},M=async E=>{if(E==="wechatpayofficial"||E==="xunhupay-wechat"||E==="xunhupay-alipay"){const F=await fe(E,t,r("payment.order.quota",{quota:t}));if(he(r,F),F.status){const{url:D,params:L}=F.data,N=os();if((E==="xunhupay-wechat"||E==="xunhupay-alipay")&&N!=="pc"){window.location.href=D,h(!1);return}a(L&&L.qrcode_url||D),c(L.order_id||""),u(E),s(!0),h(!1)}return}const O=await fe(E,t,r("payment.order.quota",{quota:t}));if(he(r,O),O.status){const{url:F,params:D}=O.data;E==="stripe"?window.location.href=F:Re(F,"POST",D),h(!1)}};return e.jsx("div",{className:"buy-action",children:m.length===0?e.jsxs(Rt,{open:d,onOpenChange:g,children:[e.jsx(Pt,{asChild:!0,children:e.jsxs(A,{variant:"default",className:"buy-button",disabled:t===0,children:[e.jsx(le,{className:"h-4 w-4 mr-2"}),r("buy.buy",{amount:t})]})}),e.jsxs(It,{children:[e.jsxs(Ot,{children:[e.jsx(Dt,{children:r("buy.dialog-title")}),e.jsx(Ft,{children:r("buy.dialog-desc",{amount:t})})]}),e.jsxs(Tt,{children:[e.jsx(_t,{children:r("buy.dialog-cancel")}),e.jsx(A,{unClickable:!0,loading:!0,onClick:w,children:r("buy.dialog-buy")})]})]})]}):e.jsxs("div",{className:"buy-action-wrapper",children:[e.jsxs(Lt,{open:o,onOpenChange:h,children:[e.jsx(Bt,{asChild:!0,children:e.jsxs(A,{variant:"default",className:"buy-button",disabled:t===0,children:[e.jsx(le,{className:"h-4 w-4 mr-2"}),r("buy.buy",{amount:t})]})}),e.jsx($t,{children:e.jsx("div",{className:$("buy-method-action flex flex-row flex-wrap items-center justify-center transition-all animate-fade-in"),children:m.map((E,O)=>e.jsx(cs,{method:E,className:"m-1 whitespace-nowrap",loading:!0,onClick:()=>M(E)},O))})})]}),f==="xunhupay-wechat"||f==="xunhupay-alipay"?e.jsx(ta,{open:x,onOpenChange:s,qrCodeUrl:n,orderId:l,onSuccess:y}):e.jsx(ea,{open:x,onOpenChange:s,qrCodeUrl:n,orderId:l,onSuccess:y})]})})}function na(){const{t}=T();return e.jsxs("div",{className:"flex flex-col md:flex-row md:flex-wrap w-full justify-center items-center pb-4 mt-4 select-none border-t",children:[e.jsx(ne,{step:1,className:"p-2",label:t("buy.deeptrain-step-1")}),e.jsx(ne,{step:2,className:"p-2",label:t("buy.deeptrain-step-2")}),e.jsx(ne,{step:3,className:"p-2",label:t("buy.deeptrain-step-3")}),e.jsx(ne,{step:4,className:"p-2",label:t("buy.deeptrain-step-4")})]})}function ia({open:t,onOpenChanged:i}){const{t:r}=T(),[o,h]=v.useState(""),d=me(),g=async()=>{if(o.trim()==="")return;const x=await Vs(o.trim());x.status?(I.success(r("buy.exchange-success"),{description:r("buy.exchange-success-prompt",{amount:x.quota})}),h(""),d(de()),i(!1)):I.error(r("buy.exchange-failed"),{description:r("buy.exchange-failed-prompt",{reason:x.error})})};return e.jsx(H,{open:t,onOpenChange:i,children:e.jsxs(q,{children:[e.jsxs(W,{children:[e.jsx(G,{children:r("buy.redeem-title")}),e.jsx(ae,{children:r("buy.redeem-description")})]}),e.jsxs("div",{className:"w-full h-fit relative",children:[e.jsx(et,{className:"h-4 w-4 text-muted-foreground absolute left-3 top-1/2 -translate-y-1/2"}),e.jsx(X,{className:"redeem-input flex-grow text-center pl-10",placeholder:r("buy.redeem-placeholder"),value:o,onChange:x=>h(x.target.value)})]}),e.jsxs(J,{children:[e.jsx(A,{variant:"outline",unClickable:!0,onClick:()=>i(!1),children:r("cancel")}),e.jsx(A,{unClickable:!0,disabled:o.trim()==="",loading:!0,onClick:g,children:r("buy.redeem")})]})]})})}function la(){const{t}=T(),i=me(),r=k(Ut),o=k(Qt),h=Vt(),[d,g]=v.useState(!1),[x,s]=v.useState(!1),[n,a]=v.useState(!1),[l,c]=v.useState(""),[f,u]=v.useState(!1),[p,m]=v.useState("");v.useEffect(()=>{i(te()),(async()=>{g(!0);try{await i(Ie()).unwrap()}catch{}finally{g(!1)}})()},[i]);const b=v.useMemo(()=>Math.round((((r==null?void 0:r.commission_rate)??0)*100+Number.EPSILON)*100)/100,[r]),y=v.useMemo(()=>{const N=window.location.origin,S=z?"/login":"/register";return o?`${N}${S}?aff=${o}`:`${N}${S}`},[o]),w={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.1,when:"beforeChildren",staggerChildren:.1}}},M={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}},E=async()=>{try{g(!0),await i(Ie()).unwrap()&&I.success(t("aff.get-success"))}catch{}finally{g(!1)}},O=async()=>{try{s(!0),await i(te()).unwrap()}catch{}finally{s(!1)}},F=async()=>{if(l.trim())try{const N=await i(Wt(l.trim())).unwrap();N!=null&&N.status?(I.success(t("aff.bind-success")),a(!1),c(""),i(te())):I.error(t("aff.bind-failed"),{description:t("aff.bind-failed-prompt",{reason:(N==null?void 0:N.error)||""})})}catch(N){const S=N instanceof Error?N.message:String(N);I.error(t("aff.bind-failed"),{description:t("aff.bind-failed-prompt",{reason:S})})}},D=async()=>{try{const N=p.trim()===""?void 0:Number(p);if(N!==void 0&&(isNaN(N)||N<0)){I.error(t("aff.withdraw-failed"),{description:t("aff.withdraw-failed-prompt",{reason:t("aff.invalid-amount")})});return}const S=await Te(N);S.status?(I.success(t("aff.withdraw-success"),{description:t("aff.withdraw-success-prompt",{amount:S.redeemed,quota:S.quota})}),m(""),u(!1),i(te()),i(de())):I.error(t("aff.withdraw-failed"),{description:t("aff.withdraw-failed-prompt",{reason:S.error||""})})}catch(N){const S=N instanceof Error?N.message:String(N);I.error(t("aff.withdraw-failed"),{description:t("aff.withdraw-failed-prompt",{reason:S})})}},L=async()=>{try{const N=await Te();N.status?(I.success(t("aff.withdraw-success"),{description:t("aff.withdraw-success-prompt",{amount:N.redeemed,quota:N.quota})}),i(te()),i(de())):I.error(t("aff.withdraw-failed"),{description:t("aff.withdraw-failed-prompt",{reason:N.error||""})})}catch(N){const S=N instanceof Error?N.message:String(N);I.error(t("aff.withdraw-failed"),{description:t("aff.withdraw-failed-prompt",{reason:S})})}};return e.jsxs(j.div,{className:"w-full h-fit md:mt-0",id:"affiliate",variants:w,initial:"hidden",animate:"visible",children:[e.jsx(H,{open:n,onOpenChange:a,children:e.jsxs(q,{children:[e.jsxs(W,{children:[e.jsx(G,{children:t("aff.title")}),e.jsx(ae,{children:t("aff.bind-desc")})]}),e.jsxs("div",{className:"w-full h-fit relative",children:[e.jsx(Oe,{className:"h-4 w-4 text-muted-foreground absolute left-3 top-1/2 -translate-y-1/2"}),e.jsx(X,{className:"flex-grow text-center pl-10",placeholder:t("aff.placeholder.code"),value:l,onChange:N=>c(N.target.value)})]}),e.jsxs(J,{children:[e.jsx(A,{variant:"outline",unClickable:!0,onClick:()=>a(!1),children:t("aff.cancel")}),e.jsx(A,{unClickable:!0,loading:!0,disabled:!l.trim(),onClick:F,children:t("aff.confirm")})]})]})}),e.jsx(H,{open:f,onOpenChange:u,children:e.jsxs(q,{children:[e.jsxs(W,{children:[e.jsx(G,{children:t("aff.withdraw-title")}),e.jsx(ae,{children:t("aff.withdraw-desc")})]}),e.jsx("div",{className:"w-full h-fit relative",children:e.jsx(X,{className:"flex-grow text-center pl-10",placeholder:t("aff.withdraw-placeholder"),value:p,onChange:N=>m(N.target.value)})}),e.jsxs(J,{children:[e.jsx(A,{variant:"outline",unClickable:!0,onClick:()=>u(!1),children:t("aff.cancel")}),e.jsx(A,{unClickable:!0,loading:!0,onClick:D,children:t("aff.confirm")})]})]})}),e.jsx(j.div,{className:"flex flex-col pb-4",variants:M,children:e.jsx(j.div,{className:"dialog-wrapper",variants:M,children:e.jsx(j.div,{className:"buy-interface",variants:M,children:e.jsx(j.div,{className:"w-full h-fit mt-0 border rounded-lg p-2.5 bg-background",variants:M,children:e.jsxs(j.div,{className:"flex flex-col p-2.5",variants:M,children:[e.jsx(j.div,{className:"text-xs text-secondary mb-1",variants:M,children:t("aff.title")}),e.jsxs(j.div,{className:"grid grid-cols-2 md:grid-cols-4 gap-2",variants:M,children:[e.jsxs("div",{className:"flex items-center p-2 border rounded-md",children:[e.jsx(ds,{className:"h-4 w-4 mr-2"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs text-secondary",children:t("aff.stats.referrals")}),e.jsx("span",{className:"text-sm font-medium",children:(r==null?void 0:r.total_referrals)??0})]})]}),e.jsxs("div",{className:"flex items-center p-2 border rounded-md",children:[e.jsx(vs,{className:"h-4 w-4 mr-2"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs text-secondary",children:t("aff.stats.earnings")}),e.jsx("span",{className:"text-sm font-medium",children:((r==null?void 0:r.total_earnings)??0).toFixed(2)})]})]}),e.jsxs("div",{className:"flex items-center p-2 border rounded-md",children:[e.jsx(ps,{className:"h-4 w-4 mr-2"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs text-secondary",children:t("aff.stats.pending")}),e.jsx("span",{className:"text-sm font-medium",children:((r==null?void 0:r.pending_amount)??0).toFixed(2)})]})]}),e.jsxs("div",{className:"flex items-center p-2 border rounded-md",children:[e.jsx(Ss,{className:"h-4 w-4 mr-2"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs text-secondary",children:t("aff.stats.rate")}),e.jsxs("span",{className:"text-sm font-medium",children:[b,"%"]})]})]})]}),e.jsxs(j.div,{className:"flex flex-col gap-2 mt-3",variants:M,children:[e.jsxs("div",{className:"flex-1 flex items-center gap-2 border rounded-md p-2",children:[e.jsx(Oe,{className:"h-4 w-4"}),e.jsx(X,{value:o||"",placeholder:t("aff.get-placeholder"),onChange:N=>i(Ht(N.target.value))}),e.jsx(A,{variant:"outline",onClick:E,children:e.jsx(De,{className:$("h-4 w-4",d&&"animate-spin")})}),e.jsx(A,{variant:"outline",onClick:()=>{o&&h(o)},disabled:!o,children:e.jsx(Fe,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex-1 flex items-center gap-2 border rounded-md p-2",children:[e.jsx(qt,{className:"h-4 w-4"}),e.jsx(X,{value:o?y:t("aff.generate-code-first"),readOnly:!0,className:o?"":"text-muted-foreground"}),e.jsx(A,{variant:"outline",onClick:()=>h(y),disabled:!o,children:e.jsx(Fe,{className:"h-4 w-4"})})]})]}),e.jsxs(j.div,{className:"flex gap-2 mt-2 justify-end",variants:M,children:[(r==null?void 0:r.allow_existing_bind)!==!1&&e.jsx(A,{variant:"outline",onClick:()=>a(!0),children:t("aff.bind-existing")}),e.jsx(A,{variant:"outline",onClick:()=>u(!0),children:t("aff.withdraw")}),e.jsx(A,{variant:"outline",onClick:L,children:t("aff.withdraw-all")}),e.jsx(A,{variant:"outline",onClick:O,children:e.jsx(De,{className:$("h-4 w-4",x&&"animate-spin")})})]})]})})})})})]})}function oa({level:t,isYearly:i}){const{t:r}=T(),o=k(Ke),h=k(ye),{symbol:d,name:g}=we(),x=v.useMemo(()=>je(g),[g]),[s,n]=Ts({triggerOnce:!0,threshold:.1}),a=v.useMemo(()=>Je(h,t),[h,t]),l=v.useMemo(()=>oe(t),[t]),c={hidden:{opacity:0,y:50},visible:{opacity:1,y:0,transition:{duration:.5,ease:"easeOut",staggerChildren:.1}}},f={hidden:{opacity:0,x:-20},visible:{opacity:1,x:0,transition:{duration:.3,ease:"easeOut"}}},u=v.useMemo(()=>{let m=1;i&&(a.discounts&&a.discounts[12]!==void 0?m=a.discounts[12]:m=.8);const b=a.price*m;return b%1!==0?b.toFixed(1):b},[a,i]),p=v.useMemo(()=>{let m=1;return i&&(a.discounts&&a.discounts[12]!==void 0?m=a.discounts[12]:m=.8),a.price*m},[a,i]);return e.jsxs(j.div,{ref:s,className:$("plan relative shadow border rounded-lg mb-4",l),variants:c,initial:"hidden",animate:n?"visible":"hidden",children:[e.jsx(qe,{children:t===2&&e.jsx(j.div,{className:"absolute top-2 right-2 bg-primary text-primary-foreground text-xs font-bold py-1 px-2 rounded-full",initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},transition:{duration:.3,type:"spring",stiffness:500,damping:25},children:r("sub.best-choice")})}),e.jsx(j.div,{whileHover:{scale:1.05},whileTap:{scale:.95},transition:{type:"spring",stiffness:400,damping:17},className:"w-fit mb-1 cursor-pointer",children:e.jsx(ie,{icon:t===1?e.jsx(ts,{}):t===2?e.jsx(ks,{}):t===3?e.jsx(Cs,{}):e.jsx(ms,{}),className:$("w-10 h-10 p-2 border-2 rounded-lg",{"border-gold text-gold fill-gold/20 bg-gold/5":t===3,"border-primary text-primary fill-primary/20 bg-primary/5":t===2,"border-amber-600 text-amber-600 fill-amber-600/20 bg-amber-600/5":t===1,"border-secondary text-secondary fill-secondary/20 bg-secondary/5":t===0})})}),e.jsx(j.div,{className:"font-bold text-md",variants:f,children:r(`sub.${l}`)}),e.jsxs(j.div,{className:"price mb-2 w-full flex items-end",variants:f,children:[e.jsx("span",{className:"text-xl md:text-2xl",children:d}),e.jsx(j.span,{className:"text-2xl md:text-3xl font-bold mr-0.5",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:u}),e.jsxs("span",{className:"text-sm font-medium",children:["/",r("sub.month")]}),e.jsxs("span",{className:"text-xs ml-2 inline-flex items-center text-muted-foreground px-1.5 py-0.5 rounded-md border bg-muted/30",children:[e.jsx(V,{className:"h-3 w-3 mr-1"}),Z(p,x).toFixed(0)]}),(()=>{const m=h.find(y=>y.level===t);let b=0;return m&&m.discounts&&m.discounts[12]!==void 0?b=Math.round((1-m.discounts[12])*100):i&&(b=20),b>0?e.jsx(j.span,{className:"text-xs text-secondary ml-auto !text-[#55b467] bg-[#f4fdeb] border border-[#55b467]/20 cursor-pointer rounded-sm px-1 py-0.5",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},whileHover:{scale:1.05},whileTap:{scale:.95},children:r("sub.year-earn-tip",{percent:`${b}%`})}):null})()]}),e.jsx(zs,{level:t,current:o,isYearly:i}),e.jsxs(j.div,{className:"flex flex-col mt-4 space-y-1.5",variants:c,children:[e.jsxs(j.p,{className:"text-sm text-secondary flex items-center mb-1",variants:f,children:[r("sub.including-model"),e.jsx(Ve,{content:r("sub.including-model-tip")})]}),a.items.map((m,b)=>e.jsxs(j.div,{className:"flex items-center",variants:f,children:[e.jsx("div",{className:"mr-1.5",children:e.jsx(ss,{model:{id:m.id,name:m.name,avatar:m.icon},size:24})}),e.jsx("p",{className:"text-sm mr-auto",children:m.name}),e.jsxs("p",{className:"text-md font-medium",children:[m.value!==-1?r("sub.plan-item-usage",{times:m.value}):r("sub.plan-item-unlimited-usage"),m.value!==-1&&e.jsxs("span",{className:"text-xs text-secondary",children:["/",r("sub.month")]})]})]},b))]})]})}function ca(){const{t}=T(),i=k(Yt),r=k(Ke),o=k(ze),h=k(Xt),d=k(Zt),[g,x]=v.useState(!0),s=k(ye),n=k(Kt),a=v.useMemo(()=>Je(s,r),[s,r]),l=v.useMemo(()=>oe(r),[r]),c=v.useMemo(()=>s.length>0&&r>0,[s,r]);if(!(s.length>0))return null;const u={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.1,delay:.25,when:"beforeChildren",staggerChildren:.1}}},p={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}};return e.jsx(j.div,{className:"w-full h-max mt-0 border rounded-lg p-2.5 bg-background",id:"plan",variants:u,initial:"hidden",animate:"visible",children:e.jsxs(j.div,{variants:p,children:[e.jsxs(j.div,{className:"flex flex-col w-full p-2.5",variants:p,children:[e.jsx(j.div,{className:"text-xs text-secondary mb-1",variants:p,children:t("sub.dialog-title")}),e.jsxs(j.div,{className:"text-2xl font-medium mb-1 flex items-center",variants:p,children:[e.jsx(ie,{icon:c?e.jsx(fs,{}):e.jsx(bs,{}),className:$("h-6 w-6 mr-1.5",c?"text-green-500 fill-green-500/20":"text-muted-foreground fill-muted-foreground/20")}),e.jsx("p",{children:t(`sub.${l}`)})]}),!n&&e.jsxs(j.div,{className:"text-xs text-secondary mt-auto break-all whitespace-pre-wrap",variants:p,children:[e.jsx(Qe,{className:"h-3 w-3 inline-block mr-1"}),t("sub.plan-not-support-relay")]}),e.jsxs(j.div,{className:"text-xs text-secondary mt-auto break-all whitespace-pre-wrap",variants:p,children:[t("buy.plan-info"),e.jsxs("a",{href:Xe,target:"_blank",rel:"noopener noreferrer",className:"inline-block text-sky-500 hover:text-sky-600",children:[e.jsx(Ze,{className:"h-3.5 w-3.5 mr-0.5 ml-1 inline-block"}),t("buy.learn-more")]})]})]}),e.jsxs(j.div,{className:"sub-wrapper px-2",variants:p,children:[i&&e.jsx(as,{type:"single",collapsible:!0,defaultValue:"sub-items",className:"w-full sub-row border rounded-lg mt-2 !px-0 !pt-0",children:e.jsxs(rs,{value:"sub-items",className:"border-none w-full",children:[e.jsxs(ns,{className:"w-full text-left justify-start pl-4 pr-6 bg-muted/25 border-b flex items-center",children:[e.jsx(us,{className:"h-8 w-8 mr-2 stroke-[1.5] !rotate-0"}),e.jsxs("div",{className:"ml-2 mr-auto",children:[e.jsx("h3",{className:"text-sm mb-0.5",children:t("sub.quota-manage")}),e.jsx("p",{className:"text-xs text-secondary",children:t("sub.expired-days",{days:o})}),e.jsx("p",{className:"text-xs text-secondary",children:h>0?t("sub.refresh-days",{refresh_days:h}):t("sub.get-refresh-days")})]})]}),e.jsx(is,{className:"p-0 h-fit",children:e.jsx("div",{className:"sub-items-wrapper p-2 px-4 pt-4 w-full h-fit grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-2.5 md:gap-x-4",children:a.items.map((m,b)=>(d==null?void 0:d[m.id])&&e.jsx(Us,{name:m.name,usage:d==null?void 0:d[m.id]},b))})})]})}),e.jsx(j.div,{className:"w-fit mx-auto mt-4 mb-2.5",variants:p,children:e.jsx(Jt,{value:g?"yearly":"monthly",onValueChange:m=>x(m==="yearly"),className:"w-full",children:e.jsxs(es,{className:"grid w-full grid-cols-2",children:[e.jsxs(_e,{value:"yearly",children:[t("sub.year-plan"),(()=>{const m=s.find(y=>y.level>0);let b=20;return m&&m.discounts&&m.discounts[12]!==void 0&&(b=Math.round((1-m.discounts[12])*100)),b>0?e.jsxs("p",{className:"text-xs text-secondary !text-[#55b467] !bg-[#f4fdeb] !border !border-[#55b467]/20 px-1 py-0.5 rounded-sm ml-2",children:["-",b,"%"]}):null})()]}),e.jsx(_e,{value:"monthly",children:t("sub.month-plan")})]})})}),e.jsx(j.div,{className:"plan-wrapper",variants:p,children:s.map((m,b)=>e.jsx(oa,{level:m.level,isYearly:g},b))})]})]})})}function wa(){return e.jsx(Gt,{className:"w-full h-full flex flex-col p-2 pr-4 bg-muted/25",children:e.jsxs("div",{className:"w-full h-fit max-w-5xl mx-auto py-2 md:py-6",children:[e.jsx(sa,{}),e.jsx(la,{}),e.jsx(ca,{})]})})}export{wa as default};
