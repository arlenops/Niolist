import{c as v,j as e,bj as S,bi as q,u as p,a2 as k,r as l,bG as _,d8 as A,d9 as x,O as N,cP as g,a5 as C,da as E,bO as R}from"./index.59694a49.js";import{i as z,g as B,a as U,b as L,c as T,d as $,e as D}from"./chart.45f0f3e6.js";import{C as I,E as O,N as b,y as M,g as F}from"./Tracker.0e6d59ec.js";import{U as V}from"./users-round.726b9065.js";import{F as G}from"./funnel.1dc762bc.js";import"./_isIndex.2c7721a3.js";import"./tiny-invariant.dd7d57d2.js";import"./path.53f90ab3.js";import"./linear.f7cbb538.js";import"./init.a5b10ee5.js";import"./time.c8c7e282.js";import"./band.6ffec690.js";import"./ordinal.93cdc51b.js";import"./array.9f3ba611.js";import"./line.b113c364.js";/**
 * @license lucide-react v0.483.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=[["path",{d:"M13 17V9",key:"1fwyjl"}],["path",{d:"M18 17V5",key:"sfb6ij"}],["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M8 17v-3",key:"17ska0"}]],P=v("ChartColumnIncreasing",H);/**
 * @license lucide-react v0.483.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]],J=v("ChartLine",W);/**
 * @license lucide-react v0.483.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=[["path",{d:"M11.7 3H5a2 2 0 0 0-2 2v16l4-4h12a2 2 0 0 0 2-2v-2.7",key:"uodpkb"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}]],Q=v("MessageSquareDot",K),f=({current:s,previous:n})=>{const a=n===0?0:(s-n)/n*100,t=Math.abs(a).toFixed(1);return a<0?e.jsxs("span",{className:"inline-flex items-center gap-x-1 rounded-tremor-small px-2 py-1 text-tremor-label font-semibold text-red-700 ring-1 ring-inset ring-tremor-ring dark:text-red-500 dark:ring-dark-tremor-ring",children:[e.jsx(S,{className:"-ml-0.5 h-4 w-4","aria-hidden":!0}),t,"%"]}):e.jsxs("span",{className:"inline-flex items-center gap-x-1 rounded-tremor-small px-2 py-1 text-tremor-label font-semibold text-green-700 ring-1 ring-inset ring-tremor-ring dark:text-green-500 dark:ring-dark-tremor-ring",children:[e.jsx(q,{className:"-ml-0.5 h-4 w-4","aria-hidden":!0}),t,"%"]})};function X(){const{t:s}=p(),{name:n}=k(),[a,t]=l.useState({...z});return _(async()=>{t(await B())},[]),e.jsxs("div",{className:"info-boxes",children:[e.jsxs("div",{className:"info-box",children:[e.jsxs("div",{className:"box-wrapper",children:[e.jsx("div",{className:"box-title",children:s("admin.billing-today")}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-end",children:[e.jsxs("div",{className:"box-value",children:[a.billing_today.toFixed(2),e.jsx("span",{className:"box-subvalue",children:n})]}),e.jsx(f,{current:a.billing_today,previous:a.billing_yesterday})]})]}),e.jsx("div",{className:"box-icon",children:e.jsx(I,{})})]}),e.jsxs("div",{className:"info-box",children:[e.jsxs("div",{className:"box-wrapper",children:[e.jsx("div",{className:"box-title",children:s("admin.billing-month")}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-end",children:[e.jsxs("div",{className:"box-value mr-1",children:[a.billing_month.toFixed(2),e.jsx("span",{className:"box-subvalue",children:n})]}),e.jsx(f,{current:a.billing_month,previous:a.billing_last_month})]})]}),e.jsx("div",{className:"box-icon",children:e.jsx(A,{})})]}),e.jsxs("div",{className:"info-box",children:[e.jsxs("div",{className:"box-wrapper",children:[e.jsx("div",{className:"box-title",children:s("admin.subscription-users")}),e.jsxs("div",{className:"box-value",children:[a.subscription_count,e.jsx("span",{className:"box-subvalue",children:s("admin.seat")})]})]}),e.jsx("div",{className:"box-icon",children:e.jsx(V,{})})]}),e.jsxs("div",{className:"info-box",children:[e.jsxs("div",{className:"box-wrapper",children:[e.jsx("div",{className:"box-title",children:s("admin.online-chats")}),e.jsx("div",{className:"box-value",children:x(a.online_chats)})]}),e.jsx("div",{className:"box-icon",children:e.jsx(Q,{})})]})]})}const y={"gpt-3.5-turbo":"green-500","gpt-3.5-turbo-16k":"green-600","gpt-4":"purple-600",dalle:"green-600","dall-e-2":"green-600","dall-e-3":"purple-700",whisper:"gray-300",tts:"gray-300",openai:"gray-300",azure:"gray-300","claude-3":"orange-500",claude:"orange-400",anthropic:"orange-400","spark-desk":"blue-400",sparkdesk:"blue-400",moonshot:"black-500",kimi:"black-500",midjourney:"indigo-600","mid-journey":"indigo-600",niji:"indigo-600","stable-diffusion":"gray-400",stablediffusion:"gray-400",stability:"gray-400","llama2-70b-4096":"red-500","mixtral-8x7b-32768":"red-500","gemma-7b-it":"red-500","chat-bison-001":"red-500",palm:"red-500",gemini:"red-500",gemma:"red-500",deepseek:"blue-700",bing:"blue-700",zhipu:"lime-500",glm:"lime-500",qwen:"indigo-600",tongyi:"indigo-600",llama:"sky-400",hunyuan:"blue-500",360:"stone-500",baichuan:"orange-700",skylark:"sky-300",doubao:"sky-300",coze:"sky-300",dify:"gray-300",openrouter:"purple-600"},w=["gray-700","indigo-600","green-500","green-600","purple-600","purple-700","orange-400","blue-400","red-500","blue-700","lime-500","sky-400","stone-500","orange-700","sky-300"];function Y(s){const a=(s.length>0?s[0]:"A").charCodeAt(0);return w[a%w.length]}function j(s){for(const n in y)if(s.toLowerCase().includes(n))return y[n];return Y(s)}function Z({labels:s,datasets:n}){const{t:a}=p(),[t,o]=l.useState(!1),i=l.useMemo(()=>s.map((r,d)=>{const h={date:r};return n.forEach(m=>{m.data[d]===0&&!t||(h[m.model]=m.data[d])}),h}),[t,s,n]),c=l.useMemo(()=>n.map(r=>r.model),[n]),u=l.useMemo(()=>n.map(r=>j(r.model)),[n]);return e.jsxs("div",{className:"chart",children:[e.jsxs("div",{className:"chart-title mb-2",children:[e.jsxs("div",{className:"flex flex-row items-center",children:[a("admin.model-chart"),e.jsx(N,{content:a("admin.model-chart-tip")})]}),s.length===0&&e.jsx(g,{className:"h-4 w-4 inline-block animate-spin"}),e.jsx("div",{className:"grow"}),e.jsx(C,{variant:"ghost",size:"icon-sm",onClick:()=>o(!t),children:t?e.jsx(P,{className:"h-4 w-4"}):e.jsx(J,{className:"h-4 w-4"})})]}),t?e.jsx(b,{className:"common-chart",data:i,index:"date",stack:!0,categories:c,colors:u,valueFormatter:r=>x(r,1,!0),showLegend:!1}):e.jsx(O,{className:"common-chart",data:i,index:"date",layout:"horizontal",stack:!0,categories:c,colors:u,valueFormatter:r=>x(r,1,!0),showLegend:!1})]})}function ee({labels:s,datasets:n}){const{t:a}=p(),t=l.useMemo(()=>n.map((i,c)=>({date:s[c],[a("admin.requests")]:i})),[s,n,a("admin.requests")]),o=l.useMemo(()=>n.reduce((i,c)=>i+c,0),[n]);return e.jsxs("div",{className:"chart",children:[e.jsxs("div",{className:"chart-title mb-2",children:[e.jsx("p",{children:a("admin.request-chart")}),s.length===0&&e.jsx(g,{className:"h-4 w-4 inline-block animate-spin"}),e.jsxs("div",{className:"ml-auto bg-blue-500/20 text-blue-500 px-1 rounded-sm text-xs py-0.5",children:["RPM ",x(o)]})]}),e.jsx(b,{className:"common-chart",data:t,categories:[a("admin.requests")],index:"date",colors:["blue"],showAnimation:!0,valueFormatter:i=>x(i,1)})]})}function ae({labels:s,datasets:n}){const{t:a}=p(),{symbol:t}=k(),o=l.useMemo(()=>n.map((c,u)=>({date:s[u],[a("admin.billing")]:c})),[s,n,a("admin.billing")]),i=l.useMemo(()=>n.reduce((c,u)=>c+u,0),[n]);return e.jsxs("div",{className:"chart",children:[e.jsxs("div",{className:"chart-title mb-2",children:[e.jsx("p",{children:a("admin.billing-chart")}),s.length===0&&e.jsx(g,{className:"h-4 w-4 inline-block animate-spin"}),e.jsxs("div",{className:"ml-auto bg-orange-500/20 text-orange-500 px-1 rounded-sm text-xs py-0.5",children:["MRR ",t,i.toFixed(2)]})]}),e.jsx(b,{className:"common-chart",data:o,categories:[a("admin.billing")],index:"date",colors:["orange"],showAnimation:!0,valueFormatter:c=>`${t}${c.toFixed(2)}`})]})}function se({labels:s,datasets:n}){const{t:a}=p(),t=l.useMemo(()=>n.map((o,i)=>({date:s[i],[a("admin.times")]:o})),[s,n,a("admin.times")]);return e.jsxs("div",{className:"chart",children:[e.jsxs("div",{className:"chart-title mb-2",children:[e.jsx("p",{children:a("admin.error-chart")}),s.length===0&&e.jsx(g,{className:"h-4 w-4 inline-block animate-spin"})]}),e.jsx(b,{className:"common-chart",data:t,categories:[a("admin.times")],index:"date",colors:["red"],showAnimation:!0,valueFormatter:o=>x(o,1)})]})}function ne({labels:s,datasets:n}){const{t:a}=p(),t=l.useMemo(()=>{const r={};return n.forEach(d=>{r[d.model]=E(d.data)}),r},[n]),o=l.useMemo(()=>{const r=Object.keys(t),d=r.map(h=>t[h]);return r.map((h,m)=>({name:h,value:d[m]}))},[t]),i=l.useMemo(()=>o.sort((r,d)=>d.value-r.value),[o]),c=l.useMemo(()=>i.map(r=>`${r.name} (${x(r.value,1)})`),[i]),u=r=>{const{payload:d,active:h}=r;if(!h||!d)return null;const m=d==null?void 0:d[0];return m?e.jsx("div",{className:"chart-tooltip min-w-56 w-max z-10 rounded-tremor-default border border-tremor-border bg-tremor-background p-2 text-tremor-default shadow-tremor-dropdown",children:e.jsxs("div",{className:"flex flex-1 space-x-2.5",children:[e.jsx("div",{className:`flex w-1.5 flex-col bg-${m==null?void 0:m.color} rounded`}),e.jsx("div",{className:"w-full",children:e.jsxs("div",{className:"flex items-center justify-between space-x-8",children:[e.jsx("p",{className:"whitespace-nowrap text-right text-tremor-content",children:m.name}),e.jsxs("p",{className:"whitespace-nowrap text-right font-medium text-tremor-content-emphasis",children:[x(m.value,1)," tokens"]})]})})]})}):null};return e.jsxs("div",{className:"chart",children:[e.jsxs("div",{className:"chart-title mb-2",children:[e.jsxs("div",{className:"flex flex-row items-center",children:[a("admin.model-usage-chart"),e.jsx(N,{content:a("admin.model-chart-tip")})]}),s.length===0&&e.jsx(g,{className:"h-4 w-4 inline-block animate-spin"})]}),e.jsxs("div",{className:"flex flex-row",children:[e.jsx(M,{className:"common-chart p-4 w-[50%]",variant:"donut",data:o,showAnimation:!0,valueFormatter:r=>x(r,1),customTooltip:u,colors:o.map(r=>j(r.name))}),e.jsx(F,{className:"common-chart p-2 w-[50%] z-0",categories:c.slice(0,6),colors:i.slice(0,6).map(r=>j(r.name))})]})]})}function re({data:s}){const{t:n}=p(),[a,t]=l.useState(["normal","api_paid","basic_plan","standard_plan","pro_plan"]),o=l.useMemo(()=>[a.includes("normal")&&{name:n("admin.identity.normal"),value:s.normal},a.includes("api_paid")&&{name:n("admin.identity.api_paid"),value:s.api_paid},a.includes("basic_plan")&&{name:n("admin.identity.basic_plan"),value:s.basic_plan},a.includes("standard_plan")&&{name:n("admin.identity.standard_plan"),value:s.standard_plan},a.includes("pro_plan")&&{name:n("admin.identity.pro_plan"),value:s.pro_plan}].filter(i=>i),[a,s,n("admin.identity.normal")]);return e.jsxs("div",{className:"chart",children:[e.jsx("div",{className:"chart-title mb-2",children:e.jsxs("div",{className:"flex flex-row items-center w-full",children:[e.jsxs("div",{children:[n("admin.user-type-chart"),e.jsx(N,{className:"translate-y-[2px]",content:n("admin.user-type-chart-tip")})]}),s.total===0&&e.jsx(g,{className:"h-4 w-4 ml-1 animate-spin"}),e.jsx("div",{className:"grow"}),e.jsx(R,{value:a,align:"end",onChange:i=>t(i),list:["normal","api_paid","basic_plan","standard_plan","pro_plan"],listTranslate:"admin.identity",children:e.jsx(C,{variant:"ghost",size:"icon-sm",children:e.jsx(G,{className:"h-4 w-4"})})})]})}),e.jsxs("div",{className:"flex flex-row",children:[e.jsx(M,{className:"common-chart p-4 w-[50%]",variant:"donut",data:o,showAnimation:!0,colors:["blue","cyan","indigo","violet","fuchsia"]}),e.jsx(F,{className:"common-chart p-4 w-[50%]",categories:o.map(i=>i.name),colors:["blue","cyan","indigo","violet","fuchsia"]})]})]})}function te(){const[s,n]=l.useState({date:[],value:[]}),[a,t]=l.useState({date:[],value:[]}),[o,i]=l.useState({date:[],value:[]}),[c,u]=l.useState({date:[],value:[]}),[r,d]=l.useState({total:0,normal:0,api_paid:0,basic_plan:0,standard_plan:0,pro_plan:0});return _(async()=>{n(await U()),t(await L()),i(await T()),u(await $()),d(await D())},[]),e.jsxs("div",{className:"chart-boxes",children:[e.jsx("div",{className:"chart-box",children:e.jsx(Z,{labels:s.date,datasets:s.value})}),e.jsx("div",{className:"chart-box",children:e.jsx(ne,{labels:s.date,datasets:s.value})}),e.jsx("div",{className:"chart-box",children:e.jsx(ae,{labels:o.date,datasets:o.value})}),e.jsx("div",{className:"chart-box",children:e.jsx(re,{data:r})}),e.jsx("div",{className:"chart-box",children:e.jsx(ee,{labels:a.date,datasets:a.value})}),e.jsx("div",{className:"chart-box",children:e.jsx(se,{labels:c.date,datasets:c.value})})]})}function fe(){return e.jsx("div",{className:"bg-background w-full h-full",children:e.jsxs("div",{className:"dashboard bg-muted/10",children:[e.jsx(X,{}),e.jsx(te,{})]})})}export{fe as default};
