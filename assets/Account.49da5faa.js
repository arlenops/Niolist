import{c as j,aq as W,ar as K,u as $,r as T,j as e,az as V,aA as H,a5 as o,e as L,aB as B,aC as Y,c5 as je,c6 as X,aE as J,aF as Q,aG as Z,c7 as he,t as ue,a as v,bA as ge,at as Ne,y as ye,a1 as we,aR as ve,c8 as be,bG as P,a0 as ke,c9 as Ce,ca as _e,cb as Ae,S as ae,H as te,cc as Se,cd as Ee,bs as ne,W as De,O as Te,ce,cf as $e,cg as Oe,ch as Ie,ci as Me,ak as q,aw as ie,al as z,aV as Pe,I as pe,aW as Le,cj as Ue,i as Re,aX as Ge,be as ze,ck as Fe,cl as qe,ac as We,cm as re,L as F,bi as Ke,bj as Ve,A as He,m as Be,cn as Ye,co as Xe,f as Je,cp as Qe,bY as Ze,cq as es,cr as ss,cs as as,J as oe,ct as ts,aL as k,cu as ns,cv as cs,cw as le,cx as is,cy as rs,cz as de,cA as os,cB as ls,cC as ds,cD as xs,cE as ms,cF as hs}from"./index.59694a49.js";import{u as us}from"./groups.c24f8e23.js";import{U as ps}from"./undo-2.0a484d6b.js";import{C as fs}from"./calendar-clock.6066c086.js";import{K as js}from"./key-round.fc144d47.js";import{C as gs}from"./clock.f951e6df.js";/**
 * @license lucide-react v0.483.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 14v6",key:"1j4efv"}],["path",{d:"M8 14v6",key:"17c4r9"}],["path",{d:"M12 16v6",key:"c8a4gj"}]],ys=j("CloudRain",Ns);/**
 * @license lucide-react v0.483.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ws=[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]],xe=j("Hand",ws);/**
 * @license lucide-react v0.483.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=[["path",{d:"M9 17H7A5 5 0 0 1 7 7",key:"10o201"}],["path",{d:"M15 7h2a5 5 0 0 1 4 8",key:"1d3206"}],["line",{x1:"8",x2:"12",y1:"12",y2:"12",key:"rvw6j4"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]],S=j("Link2Off",vs);/**
 * @license lucide-react v0.483.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],E=j("Link2",bs);/**
 * @license lucide-react v0.483.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=[["path",{d:"M12 22v-5",key:"1ega77"}],["path",{d:"M9 8V2",key:"14iosj"}],["path",{d:"M15 8V2",key:"18g5xt"}],["path",{d:"M18 8v5a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V8Z",key:"osxo6l"}]],Cs=j("Plug",ks);/**
 * @license lucide-react v0.483.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _s=[["path",{d:"M2 21a8 8 0 0 1 10.434-7.62",key:"1yezr2"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["path",{d:"m19.5 14.3-.4.9",key:"1eb35c"}],["path",{d:"m16.9 20.8-.4.9",key:"dfjc4z"}],["path",{d:"m21.7 19.5-.9-.4",key:"q4dx6b"}],["path",{d:"m15.2 16.9-.9-.4",key:"1r0w5f"}],["path",{d:"m21.7 16.5-.9.4",key:"1knoei"}],["path",{d:"m15.2 19.1-.9.4",key:"j188fs"}],["path",{d:"m19.5 21.7-.4-.9",key:"1tonu5"}],["path",{d:"m16.9 15.2-.4-.9",key:"699xu"}]],As=j("UserRoundCog",_s);/**
 * @license lucide-react v0.483.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=[["circle",{cx:"12",cy:"8",r:"5",key:"1hypcn"}],["path",{d:"M20 21a8 8 0 0 0-16 0",key:"rfgkzh"}]],Es=j("UserRound",Ss);const me=["broadcast_event","key_quota_not_enough_event","account_quota_not_enough_event","payment_event"];async function Ds(){try{const c=(await W.get("/notification/view")).data;return c.status&&c.data&&c.data.notify_type===""&&(c.data.notify_type="email"),c}catch(s){return{status:!1,error:K(s)}}}async function Ts(s){try{return(await W.post("/notification/update",s)).data}catch(c){return{status:!1,error:K(c)}}}async function $s(s,c){try{return(await W.post(`/notification/test/${s}`,c)).data}catch(x){return{status:!1,error:K(x)}}}function D({variant:s,title:c,description:x,confirmText:r,cancelText:t,children:d,className:f,onClick:h,...g}){const{t:u}=$(),[N,a]=T.useState(!1),i=h?async()=>{await(h==null?void 0:h()),a(!1)}:void 0;return e.jsxs(V,{open:N,onOpenChange:a,children:[e.jsx(H,{asChild:!0,children:e.jsx(o,{variant:s,className:L("flex items-center",f),...g,children:d})}),e.jsxs(B,{children:[e.jsxs(Y,{children:[e.jsx(je,{emoji:"1f641"}),e.jsx(X,{children:c||u("are-you-sure")}),e.jsx(J,{children:x||u("this-action-cannot-be-undone")})]}),e.jsxs(Q,{children:[e.jsx(Z,{children:t||u("cancel")}),e.jsx(he,{asChild:!0,children:e.jsx(o,{unClickable:!0,loading:!0,onClick:i,variant:"destructive",children:r||u("confirm")})})]})]})]})}function b({title:s,description:c,icon:x,children:r,footer:t,className:d,classNameWrapper:f}){const{t:h}=$();return e.jsxs("div",{className:L("flex flex-col bg-background rounded-lg shadow border overflow-hidden",f),children:[e.jsxs("div",{className:"select-none inline-flex flex-row items-center h-fit w-full border-b px-4 py-2.5 bg-muted/20",children:[e.jsx("div",{className:"flex items-center mr-2.5",children:x&&e.jsx(Je,{icon:x,className:"w-8 h-8 p-2 rounded-lg bg-muted text-secondary"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("p",{className:"text-sm font-medium",children:h(s)}),c&&e.jsx("p",{className:"text-xs text-secondary",children:h(c)})]})]}),e.jsx("div",{className:L("p-4",d),children:r}),t&&e.jsx("div",{className:"flex flex-row items-center px-4 pb-4 pt-2",children:t})]})}function Os({data:s}){const{t:c}=$(),x=ue(),r=t=>{const d=new Date(t);return`${d.getMonth()+1}-${d.getDate()} ${d.getHours().toString().padStart(2,"0")}:${d.getMinutes().toString().padStart(2,"0")}`};return e.jsx("div",{className:"space-y-3 pt-2 pb-6",children:s.map(t=>e.jsxs("div",{onClick:()=>q(Qe(t.hash),"_blank"),className:"flex items-center justify-between w-full border border-input p-4 rounded-lg hover:bg-muted/20 duration-200 cursor-pointer transition-colors",children:[e.jsxs("div",{className:"flex-grow mr-4",children:[e.jsx("div",{className:"flex items-center mb-1",children:e.jsx("h3",{className:"text-sm font-medium line-clamp-1",children:t.name})}),e.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[e.jsx(gs,{className:"h-3 w-3 mr-1"}),r(t.time)]})]}),e.jsxs(V,{children:[e.jsx(H,{asChild:!0,children:e.jsx(o,{variant:"light-destructive",size:"icon",onClick:d=>d.stopPropagation(),children:e.jsx(Ze,{className:"h-4 w-4"})})}),e.jsxs(B,{children:[e.jsxs(Y,{children:[e.jsx(X,{children:c("account.share-delete")}),e.jsx(J,{children:c("account.share-delete-description")})]}),e.jsxs(Q,{children:[e.jsx(Z,{children:c("cancel")}),e.jsx(he,{onClick:d=>{d.stopPropagation(),es(x,t.hash)},children:c("confirm")})]})]})]})]},t.conversation_id))})}function zs(){const{t:s}=$(),c=ue(),x=v(ge),r=v(Ne),t=v(ye),d=v(we),f=ve(),h=us(!0),g=v(be),[u,N]=T.useState(!1),[a,i]=T.useState(!1),l=async()=>{x&&(N(!0),await ss(c),N(!1))};P(l,[x]);async function U(){await as(g),oe.success(s("api.copied"),{description:s("api.copied-description")})}async function R(){const n=await ts(c);k(s,n,!0),n.status&&i(!1)}const[y,fe]=ke.useState({...Ce}),w=_e(),ee=T.useMemo(()=>(y.oauth_instances||[]).reduce((p,m)=>({...p,[m.provider_type]:m}),{}),[y]),C=(n,p)=>{if(n==="rainbow"){const I=`rainbow-${p}`,M=ee[I];return M&&M.provider_id}const m=ee[n];return m&&m.provider_id},O=n=>w[n]!==void 0,G=v(Ae);P(async()=>{if(t){if(G.length>0)return;const n=await ns(c);n&&oe.error(s("share.sync-error"),{description:n})}},[t]);const se=async()=>{if(!t)return;const n=await hs();console.log("[account api] get user info:",n),k(s,n),n.status&&fe(n.data)};P(se,[t]);const _=async(n,p)=>{const m=await cs(n,p);return k(s,m,!0),m.status&&await se(),m.status},A=async(n,p)=>{var I;if(n==="rainbow")return w.rainbow?le(((I=w.rainbow.find(M=>M.method===p))==null?void 0:I.redirect_uri)||""):void 0;const m=w[n];if(m)return m&&le(m.toString())};return e.jsx(ae,{className:"relative w-full h-full flex flex-col bg-background",children:e.jsxs("div",{className:"px-4 py-6 md:py-12 lg:py-16 h-full flex flex-col w-full max-w-3xl mx-auto space-y-4",children:[e.jsxs(b,{icon:e.jsx(Es,{}),title:"account.my-account",description:s("account.my-account-description"),footer:t?e.jsxs(o,{classNameWrapper:"ml-auto",className:"flex flex-row items-center",onClick:()=>c(Se()),children:[e.jsx(ps,{className:"h-4 w-4 mr-1.5"}),s("logout")]}):e.jsxs(o,{classNameWrapper:"ml-auto",className:"flex flex-row items-center",onClick:te,children:[e.jsx(xe,{className:"h-4 w-4 mr-1.5"}),s("login")]}),children:[e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(Ee,{username:r,className:"w-16 h-16 shrink-0 shadow text-lg rounded-full"}),e.jsx("div",{className:"flex flex-row w-full",children:e.jsxs("div",{className:"flex flex-col w-fit",children:[e.jsx("p",{className:"text-xl font-semibold cursor-pointer select-none",onClick:()=>f(r),children:t?r:s("anonymous")}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["#",y.id]})]})})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(ne,{className:"px-3 py-1 text-sm font-medium",children:s(`admin.channels.groups.${h}`)}),e.jsx(ne,{variant:"outline",className:"px-3 py-1 text-sm font-medium",children:s("account.registerDays",{days:Math.ceil(y.register_days)})})]})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-card shadow-sm rounded-lg p-4 transition-all border",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:s("account.current-quota")}),e.jsx(De,{className:"w-10 h-10 p-2 rounded-lg bg-muted/40 text-secondary stroke-[1]"})]}),e.jsx("p",{className:"text-md",children:d.toFixed(2)})]}),e.jsxs("div",{className:"bg-card shadow-sm rounded-lg p-4 transition-all border",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:s("account.used-quota")}),e.jsx(ys,{className:"w-10 h-10 p-2 rounded-lg bg-muted/40 text-secondary stroke-[1]"})]}),e.jsx("p",{className:"text-md",children:y.used_quota.toFixed(2)})]}),e.jsxs("div",{className:"bg-card shadow-sm rounded-lg p-4 transition-all border",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:s("account.plan-total-month")}),e.jsx(fs,{className:"w-10 h-10 p-2 rounded-lg bg-muted/40 text-secondary stroke-[1]"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("p",{className:"text-md mr-2",children:y.plan_total_month}),e.jsx(Te,{className:"text-muted-foreground hover:text-foreground transition-colors",content:s("account.plan-total-month-tips")})]})]})]})]}),e.jsx(b,{title:"account.oauth",description:s("account.oauth-description"),icon:e.jsx(js,{}),children:e.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[O("wechat")&&e.jsxs("div",{className:"flex items-center w-full",children:[e.jsx(ce,{className:"h-5 w-5 mr-2"}),e.jsx("span",{children:s("auth.wechat")}),e.jsx("div",{className:"flex-grow"}),C("wechat")?e.jsxs(D,{variant:"destructive",className:"flex flex-row items-center",onClick:()=>_("wechat"),children:[e.jsx(S,{className:"h-4 w-4 mr-1.5"}),e.jsx("span",{children:s("disconnect")})]}):e.jsxs(o,{variant:"outline",className:"flex flex-row items-center",onClick:()=>A("wechat"),children:[e.jsx(E,{className:"h-4 w-4 mr-1.5"}),e.jsx("span",{children:s("connect")})]})]}),O("github")&&e.jsxs("div",{className:"flex items-center w-full",children:[e.jsx($e,{className:"h-5 w-5 mr-2"}),e.jsx("span",{children:"GitHub"}),e.jsx("div",{className:"flex-grow"}),C("github")?e.jsxs(D,{variant:"destructive",className:"flex flex-row items-center",onClick:()=>_("github"),children:[e.jsx(S,{className:"h-4 w-4 mr-1.5"}),e.jsx("span",{children:s("disconnect")})]}):e.jsxs(o,{variant:"outline",className:"flex flex-row items-center",onClick:()=>A("github"),children:[e.jsx(E,{className:"h-4 w-4 mr-1.5"}),e.jsx("span",{children:s("connect")})]})]}),O("google")&&e.jsxs("div",{className:"flex items-center w-full",children:[e.jsx(Oe,{className:"h-5 w-5 mr-2"}),e.jsx("span",{children:"Google"}),e.jsx("div",{className:"flex-grow"}),C("google")?e.jsxs(D,{variant:"destructive",className:"flex flex-row items-center",onClick:()=>_("google"),children:[e.jsx(S,{className:"h-4 w-4 mr-1.5"}),e.jsx("span",{children:s("disconnect")})]}):e.jsxs(o,{variant:"outline",className:"flex flex-row items-center",onClick:()=>A("google"),children:[e.jsx(E,{className:"h-4 w-4 mr-1.5"}),e.jsx("span",{children:s("connect")})]})]}),O("telegram")&&e.jsxs("div",{className:"flex items-center w-full",children:[e.jsx(Ie,{className:"h-5 w-5 mr-2"}),e.jsx("span",{children:"Telegram"}),e.jsx("div",{className:"flex-grow"}),C("telegram")?e.jsxs(D,{variant:"destructive",className:"flex flex-row items-center",onClick:()=>_("telegram"),children:[e.jsx(S,{className:"h-4 w-4 mr-1.5"}),e.jsx("span",{children:s("disconnect")})]}):e.jsxs(o,{variant:"outline",className:"flex flex-row items-center",onClick:()=>A("telegram"),children:[e.jsx(E,{className:"h-4 w-4 mr-1.5"}),e.jsx("span",{children:s("connect")})]})]}),w.rainbow&&w.rainbow.map(({method:n})=>e.jsxs("div",{className:"flex items-center w-full",children:[(()=>({baidu:e.jsx(is,{className:"h-5 w-5 mr-2"}),huawei:e.jsx(rs,{className:"h-5 w-5 mr-2"}),weibo:e.jsx(de,{className:"h-5 w-5 mr-2"}),sina:e.jsx(de,{className:"h-5 w-5 mr-2"}),qq:e.jsx(os,{className:"h-5 w-5 mr-2"}),wx:e.jsx(ce,{className:"h-5 w-5 mr-2"}),xiaomi:e.jsx(ls,{className:"h-5 w-5 mr-2"}),douyin:e.jsx(ds,{className:"h-5 w-5 mr-2"}),dingtalk:e.jsx(xs,{className:"h-5 w-5 mr-2"}),alipay:e.jsx(ms,{className:"h-5 w-5 mr-2"})})[n])(),e.jsx("span",{children:s(`auth.providers.${n}`)}),e.jsx("div",{className:"flex-grow"}),C("rainbow",n)?e.jsxs(D,{variant:"destructive",className:"flex flex-row items-center",onClick:()=>_("rainbow",n),children:[e.jsx(S,{className:"h-4 w-4 mr-1.5"}),e.jsx("span",{children:s("disconnect")})]}):e.jsxs(o,{variant:"outline",className:"flex flex-row items-center",onClick:()=>A("rainbow",n),children:[e.jsx(E,{className:"h-4 w-4 mr-1.5"}),e.jsx("span",{children:s("connect")})]})]},n))]})}),e.jsx(Me,{children:e.jsx(b,{title:"account.deeptrain",description:s("account.deeptrain-description"),icon:e.jsx(As,{}),footer:t?e.jsxs(o,{className:"flex flex-row items-center",classNameWrapper:"ml-auto",onClick:()=>q(`${z}/home`),children:[e.jsx(ie,{className:"h-4 w-4 mr-1.5"}),s("manage")]}):e.jsxs(o,{classNameWrapper:"ml-auto",onClick:te,children:[e.jsx(xe,{className:"h-4 w-4 mr-1.5"}),s("login")]}),children:e.jsxs("div",{className:"flex flex-row items-center space-x-2",children:[e.jsx("img",{src:`${z}/favicon.ico`,alt:"",className:"w-12 h-12 select-none cursor-pointer",onClick:()=>q(`${z}/home`)}),e.jsxs("div",{className:"inline-flex flex-col",children:[e.jsx("p",{className:"text-common text-sm font-bold",children:"DeepTrain SSO"}),e.jsx("p",{className:"text-secondary text-xs",children:s("account.deeptrain-description")})]})]})})}),e.jsx(Is,{}),e.jsx(b,{title:"api.title",description:s("account.api-description"),icon:e.jsx(Cs,{}),children:e.jsxs("div",{className:"api-dialog",children:[e.jsxs("div",{className:"api-wrapper flex flex-row space-x-1",children:[e.jsx(o,{variant:"outline",size:"icon-sm",className:"shrink-0",onClick:l,children:e.jsx(Pe,{className:L("h-3.5 w-3.5",u&&"animate-spin")})}),e.jsx(pe,{type:"password",value:g,readOnly:!0,classNameWrapper:"grow",className:"text-xs h-8"}),e.jsx(o,{variant:"default",className:"shrink-0",size:"icon-sm",onClick:U,children:e.jsx(Le,{className:"h-3.5 w-3.5"})})]}),e.jsxs("div",{className:"flex flex-row mt-2 items-center justify-center",children:[e.jsxs(V,{open:a,onOpenChange:i,children:[e.jsx(H,{asChild:!0,children:e.jsxs(o,{variant:"destructive",size:"default-sm",className:"text-xs mr-2",children:[e.jsx(Ue,{className:"h-3.5 w-3.5 mr-2"}),s("api.reset")]})}),e.jsxs(B,{children:[e.jsxs(Y,{children:[e.jsx(X,{children:s("api.reset")}),e.jsx(J,{children:s("api.reset-description")})]}),e.jsxs(Q,{children:[e.jsx(o,{variant:"destructive",loading:!0,onClick:R,unClickable:!0,children:s("confirm")}),e.jsx(Z,{children:s("cancel")})]})]})]}),e.jsx(o,{variant:"outline",size:"default-sm",className:"text-xs",asChild:!0,children:e.jsxs("a",{href:Re,target:"_blank",children:[e.jsx(ie,{className:"h-3.5 w-3.5 mr-2"}),s("api.learn-more")]})})]})]})}),e.jsx(b,{icon:e.jsx(Ge,{}),title:"share.manage",description:s("account.share-description"),className:"bg-background px-1",children:G.length>0?e.jsx(ae,{className:"h-48 md:h-64 px-4",children:e.jsx("div",{className:"w-full",children:e.jsx(Os,{data:G})})}):e.jsxs("div",{className:"flex flex-col items-center text-sm select-none py-8",children:[e.jsx(ze,{emoji:"1f4c2",className:"w-12 h-12 p-2 rounded-md bg-muted/80 mb-4"}),e.jsx("p",{children:s("share.empty")}),e.jsxs("p",{className:"flex flex-row items-center text-xs text-secondary mt-1.5",children:[e.jsx(Fe,{className:"h-3 w-3 mr-1"}),s("share.share-tip")]})]})})]})})}const Is=()=>{const{t:s}=$(),c={config:{notify_type:"email",notify_events:[...me],config:{email:{},wxpusher:{appToken:"",userId:""},discord:{webhookUrl:""},telegram:{botToken:"",chatId:""},feishu:{webhookUrl:""},webhook:{url:""}}},isLoading:!1,expandedService:null},x=(a,i)=>{switch(i.type){case"SET_CONFIG":return{...a,config:i.payload};case"SET_LOADING":return{...a,isLoading:i.payload};case"TOGGLE_EXPAND":return{...a,expandedService:a.expandedService===i.payload?null:i.payload};case"UPDATE_NOTIFY_EVENTS":return{...a,config:{...a.config,notify_events:i.payload}};case"UPDATE_SERVICE":return{...a,config:{...a.config,config:{...a.config.config,[i.payload.service]:{...a.config.config[i.payload.service],[i.payload.field]:i.payload.value}}}};case"UPDATE_NOTIFY_TYPE":return{...a,config:{...a.config,notify_type:i.payload}};default:return a}},[r,t]=T.useReducer(x,c);P(async()=>{const a=await Ds();k(s,a),a.status&&a.data&&t({type:"SET_CONFIG",payload:a.data})},[s]);const d=(a,i,l)=>{t({type:"UPDATE_SERVICE",payload:{service:a,field:i,value:l}})},f=a=>{t({type:"UPDATE_NOTIFY_TYPE",payload:a})},h=async()=>{t({type:"SET_LOADING",payload:!0});const a=await Ts(r.config);k(s,a,!0),t({type:"SET_LOADING",payload:!1})},g=async a=>{const i=await $s(a,r.config);k(s,i,!0)},u=a=>{t({type:"TOGGLE_EXPAND",payload:a})},N=Object.entries(r.config.config);return e.jsxs(b,{icon:e.jsx(qe,{}),title:"account.notification.title",description:s("account.notification.description"),className:"bg-background px-1",footer:e.jsxs(o,{onClick:h,disabled:r.isLoading,classNameWrapper:"ml-auto",children:[e.jsx(We,{className:"h-4 w-4 mr-1.5"}),s("save")]}),children:[e.jsx("p",{className:"text-sm px-2 font-bold mb-2",children:s("account.notification.event")}),e.jsx("div",{className:"space-y-2.5 p-4 mb-4 m-2 rounded-md border",children:me.map(a=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(re,{id:`event-${a}`,checked:r.config.notify_events.includes(a),onCheckedChange:i=>{t({type:"UPDATE_NOTIFY_EVENTS",payload:i?[...r.config.notify_events,a]:r.config.notify_events.filter(l=>l!==a)})}}),e.jsx(F,{htmlFor:`event-${a}`,className:"text-sm cursor-pointer",children:s(`account.notification.events.${a}`)})]},a))}),e.jsx("p",{className:"text-sm px-2 font-bold mb-2",children:s("account.notification.method")}),e.jsx("div",{className:"space-y-2.5 px-2",children:N.map(([a,i])=>e.jsxs("div",{className:"rounded-md overflow-hidden border",children:[e.jsxs("div",{className:"flex items-center justify-between py-2 px-4 bg-muted/20 cursor-pointer",onClick:()=>{u(a)},children:[e.jsxs("div",{className:"flex items-center space-x-2 select-none",children:[e.jsx(re,{id:`${a}-enabled`,checked:r.config.notify_type===a,onCheckedChange:l=>{f(a),l&&r.expandedService!==a&&u(a)},onClick:l=>l.stopPropagation()}),e.jsx(F,{htmlFor:`${a}-enabled`,className:"text-sm font-medium cursor-pointer",children:s(`account.notification.type.${a}`)})]}),e.jsx(o,{variant:"ghost",size:"xs",onClick:l=>{l.stopPropagation(),u(a)},children:r.expandedService===a?e.jsx(Ke,{className:"h-3 w-3"}):e.jsx(Ve,{className:"h-3 w-3"})})]}),e.jsx(He,{children:r.expandedService===a&&e.jsx(Be.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.25,ease:"easeInOut"},className:"overflow-hidden",children:e.jsxs("div",{className:"p-2 border-t text-sm",children:[e.jsx(Ye,{className:"text-sm rounded-md mb-2 border px-1 py-2",children:s(`account.notification.tiplist.${a}`)}),e.jsx("div",{className:"space-y-2 pl-4 select-none",children:Object.entries(i).map(([l,U])=>l!=="enabled"&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F,{htmlFor:`${a}-${l}`,className:"w-1/4 text-xs",children:s(`account.notification.${l}`)}),e.jsx(pe,{id:`${a}-${l}`,value:U,onChange:R=>d(a,l,R.target.value),className:"w-3/4 text-xs h-7"})]},l))}),e.jsxs(o,{onClick:()=>g(a),loading:!0,variant:"outline",size:"xs",classNameWrapper:"mt-2 ml-auto w-fit select-none",children:[e.jsx(Xe,{className:"mr-1 h-3 w-3"}),s("account.notification.test")]})]})})})]},a))})]})};export{zs as default};
